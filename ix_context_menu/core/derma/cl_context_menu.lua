-- <|> Hello, fucker | Taxin2012 and PURP was here | Mysterious Zone Project | mzrp.ru <|>
do function CM_AddBtn()print("DEPRECATED FUNCTION CALLED (CM_AddBtn)")debug.Trace()end local a={521,449,430}local b=1.2 local function c(l)return Material(l,"smooth")end local function d(l,m)net.Start("ixRecognize")net.WriteUInt(l,2)net.WriteBool(m)net.SendToServer()end function ChangeVoiceRadius(l)net.Start("voiceRadiusChange")net.WriteUInt(l,2)net.SendToServer()end local function e(l,m,n)Derma_StringRequest(l,m,"",n)end local f=332*b local g=c("materials/mz_context_menu/c_menu_base.png")local h={[1]={hoverSizeX=570*b,hoverSizeY=85*b,textureSizeX=142*b,textureSizeY=141*b,posX=171,posY=199,material=c("materials/mz_context_menu/c_menu_choise_base_LT.png"),wingMaterial=c("materials/mz_context_menu/c_menu_LT.png"),wingXMultiplier=-2.91,wingYMultiplier=0,btnXModifiers={43,23,3},buttons={{c("materials/mz_context_menu/c_menu_choise_LT_3.png"),"Навсегда представиться игроку перед вами",function()d(0,true)end},{c("materials/mz_context_menu/c_menu_choise_LT_2.png"),"Навсегда представиться в радиусе разговора",function()d(2,true)end},{c("materials/mz_context_menu/c_menu_choise_LT_1.png"),"Навсегда представиться в радиусе крика",function()d(3,true)end}}},[2]={hoverSizeX=570*b,hoverSizeY=85*b,textureSizeX=142*b,textureSizeY=141*b,posX=0,posY=199,material=c("materials/mz_context_menu/c_menu_choise_base_RT.png"),wingMaterial=c("materials/mz_context_menu/c_menu_RT.png"),wingXMultiplier=-.01,wingYMultiplier=0,btnXModifiers={7,105,147},buttons={{c("materials/mz_context_menu/c_menu_choise_RT_3.png"),"Временно представиться игроку перед вами",function()d(0,false)end},{c("materials/mz_context_menu/c_menu_choise_RT_2.png"),"Временно представиться в радиусе разговора",function()d(2,false)end},{c("materials/mz_context_menu/c_menu_choise_RT_1.png"),"Временно представиться в радиусе крика",function()d(3,false)end}}},[3]={hoverSizeX=416*b,hoverSizeY=165*b,textureSizeX=124*b,textureSizeY=164*b,posX=-50,posY=98,material=c("materials/mz_context_menu/c_menu_choise_base_R.png"),wingMaterial=c("materials/mz_context_menu/c_menu_R.png"),wingXMultiplier=.81,wingYMultiplier=-.01,buttons={{c("materials/mz_context_menu/c_menu_choise_R.png"),"Связаться с администрацией",function()e("Вызвать Администратора","Укажите причину",function(l)RunConsoleCommand("cats_help",l)end)end}}},[4]={hoverSizeX=570*b,hoverSizeY=85*b,textureSizeX=142*b,textureSizeY=141*b,posX=0,posY=-28,material=c("materials/mz_context_menu/c_menu_choise_base_RD.png"),wingMaterial=c("materials/mz_context_menu/c_menu_RD.png"),wingXMultiplier=.05,wingYMultiplier=.4,btnXModifiers={137,95,-2},buttons={{c("materials/mz_context_menu/c_menu_choise_RD_1.png"),"Передать деньги игроку, на которого вы смотрите",function()e("Передать деньги","Введите количество",function(l)RunConsoleCommand("ix","givemoney",l)end)end},{c("materials/mz_context_menu/c_menu_choise_RD_2.png"),"Выкинуть деньги пачкой перед собой",function()e("Бросить деньги","Введите количество",function(l)RunConsoleCommand("ix","dropmoney",l)end)end},{c("materials/mz_context_menu/c_menu_choise_RD_3.png"),"Изменить торговый режим",function()RunConsoleCommand("ix","tradetoggle")end}}},[5]={hoverSizeX=570*b,hoverSizeY=85*b,textureSizeX=142*b,textureSizeY=141*b,posX=171,posY=-28,material=c("materials/mz_context_menu/c_menu_choise_base_LD.png"),wingMaterial=c("materials/mz_context_menu/c_menu_LD.png"),wingXMultiplier=-2.9,wingYMultiplier=.4,btnXModifiers={3,23,43},buttons={{c("materials/mz_context_menu/c_menu_choise_LD_1.png"),'Изменить громкость голоса на "Шепот"',function()ChangeVoiceRadius(1)end},{c("materials/mz_context_menu/c_menu_choise_LD_2.png"),'Изменить громкость голоса на "Разговор"',function()ChangeVoiceRadius(2)end},{c("materials/mz_context_menu/c_menu_choise_LD_3.png"),'Изменить громкость голоса на "Крик"',function()ChangeVoiceRadius(3)end}}},[6]={hoverSizeX=416*b,hoverSizeY=165*b,textureSizeX=124*b,textureSizeY=164*b,posX=198,posY=98,material=c("materials/mz_context_menu/c_menu_choise_base_L.png"),wingMaterial=c("materials/mz_context_menu/c_menu_L.png"),wingXMultiplier=-3.18,wingYMultiplier=-.01,buttons={{c("materials/mz_context_menu/c_menu_choise_L.png"),"Сменить описание персонажа",function()e("Сменить описание","Введите новое описание",function(l)RunConsoleCommand("ix","chardesc",l)end)end}}},[7]={material=c("materials/mz_context_menu/c_menu_choise_base_C.png"),textureSizeX=90*b,textureSizeY=90*b,xMultiplier=.5,yMultiplier=.5,yModifier=-1,onPressed=function()Acts_OpenMenu()end}}local function i(l,m)local n=l.buttons if n~=nil then for o,p in next,n do p:SetEnabled(m)p:SetVisible(m)end end end local function j(l,m,n,o)local p=m:Add("DButton")p.id=l p:SetText("")local q=h[l]p:SetSize(q.textureSizeX,q.textureSizeY)if o~=nil then p.OnMousePressed=o end p.Paint=function(r,s,t)if r:IsHovered()==false and r.isSelected==nil then return end surface.SetDrawColor(color_white)surface.SetMaterial(n)surface.DrawTexturedRect(0,0,s,t)local u=m.currButton if u~=nil and u.id~=l then u.isSelected=nil i(u,false)end m.currButton=p m.currButtonID=l p.isSelected=true i(p,true)end return p end local k={}function k:Init()self:SetSize(ScrW(),ScrH())self:ShowCloseButton(false)self:MakePopup()self:SetDraggable(false)self:SetMouseInputEnabled(true)self.lblTitle:SetVisible(false)local l,m,n=ScrW()*.5,ScrH()*.5,f*.5 self.Paint=function(q)Derma_DrawBackgroundBlur(q)surface.SetDrawColor(color_white)surface.SetMaterial(g)surface.DrawTexturedRect(l-n,m-n,f,f)local r,s=q.currButtonID,q.currButton if r~=nil and r~=0 then local t,u=s:IsHovered(),s.buttons if u~=nil then for A,B in next,u do if B:IsHovered()then t=true break end end if t==false then s.isSelected=nil return i(s,false)end local v=h[r]surface.SetMaterial(v.wingMaterial)local w,x=s:GetPos()local y,z=w+s:GetWide()*v.wingXMultiplier,x+s:GetTall()*v.wingYMultiplier surface.DrawTexturedRect(y,z,v.hoverSizeX,v.hoverSizeY)end end return true end for q,r in next,h do if r.posX==nil then continue end local s=j(q,self,r.material)s:SetPos(l-r.posX,m-r.posY)s.buttons={}local t,u=s:GetPos()local v,w=s:GetSize()local x,y=t+v*r.wingXMultiplier,u+w*r.wingYMultiplier local z=r.buttons for A,B in next,z do local C=self:Add("DButton")C:SetText(B[2])C:SetFont("ixSmallFont")C:SetTextColor(color_white)C.OnMousePressed=B[3]C:SetEnabled(false)C:SetVisible(false)if z[2]~=nil then C:SetPos(x+((r.btnXModifiers~=nil and r.btnXModifiers[A])or 0),y+(A-1)*34)C:SetSize(a[((q==5 or q==4)and 4-A)or A]*b,34)else C:SetPos(x,y)C:SetSize(r.hoverSizeX,r.hoverSizeY)end C.Paint=function(D,E,F)if D:IsHovered()==false then return end surface.SetDrawColor(color_white)surface.SetMaterial(B[1])surface.DrawTexturedRect(0,0,E,F)end s.buttons[A]=C end end local o=h[7]local p=j(7,self,o.material,o.onPressed)p:SetPos(l-p:GetWide()*o.xMultiplier,m-p:GetTall()*o.yMultiplier+o.yModifier)end vgui.Register("CstmContextMenu",k,"DFrame")end