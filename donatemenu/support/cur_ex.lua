-- <|> Hello, fucker | Taxin2012 and PURP was here | Mysterious Zone Project | mzrp.ru <|>
local a={}function a:Init()local b=AutoDonate.GetExchangeItem()local c=(b~=nil and b.discount)or 0 local d=self:Add("DPanel")d:Dock(FILL)d.Paint=function()end local e=d:Add("DLabel")e:Dock(TOP)e:SetFont("font.donate.black.medium")e:SetText("Обмен валюты "..((c>0 and("(Бонус "..c.."%)"))or""))e:SetContentAlignment(5)e:DockMargin(0,5,0,0)e:SizeToContentsY()e:SetTall(e:GetTall()+10)local f=d:Add("DLabel")f:Dock(TOP)f:SetFont("font.donate.black.medium")f:SetText("Отдам:")f:SetContentAlignment(5)f:DockMargin(0,5,0,0)f:SizeToContentsY()f:SetTall(f:GetTall()+10)local g=d:Add("DTextEntry")g:Dock(TOP)g:SetNumeric(true)g:SetUpdateOnType(true)g:SetFont("font.donate.black.medium")g:SetText(0)g:SetContentAlignment(4)g:SetTall(AutoDonate.multiplyResolution(AutoDonate.y,0.05))g:DockMargin(0,10,0,0)g.Paint=function(l,m,n)surface.SetDrawColor(0,0,0,100)surface.DrawRect(0,0,m,n)l:DrawTextEntryText(Color(247,255,33),Color(0,0,0),Color(255,255,255))end g.OnGetFocus=function(l)if l:GetValue()=="0"then l:SetText("")end end g.OnLoseFocus=function(l)if l:GetValue()==""then l:SetText(0)end end local h=d:Add("DLabel")h:Dock(TOP)h:SetFont("font.donate.black.medium")h:SetText("Получу:")h:SetContentAlignment(5)h:DockMargin(0,5,0,0)h:SizeToContentsY()h:SetTall(f:GetTall()+10)local i=d:Add("DTextEntry")i:Dock(TOP)i:SetNumeric(true)i:SetUpdateOnType(true)i:SetFont("font.donate.black.medium")i:SetText(0)i:SetContentAlignment(4)i:SetTall(AutoDonate.multiplyResolution(AutoDonate.y,0.05))i:DockMargin(0,10,0,0)i.Paint=function(l,m,n)surface.SetDrawColor(0,0,0,100)surface.DrawRect(0,0,m,n)l:DrawTextEntryText(Color(247,255,33),Color(0,0,0),Color(255,255,255))end i.OnGetFocus=function(l)if l:GetValue()=="0"then l:SetText("")end end i.OnLoseFocus=function(l)if l:GetValue()==""then l:SetText(0)end end g.OnValueChange=function(l,m)local n=AutoDonate.GetExchangePrice(tonumber(m)or 0,true)i:SetText(n+(n-AutoDonate.GetDiscountPrice(n,c)))end i.OnValueChange=function(l,m)g:SetText(AutoDonate.GetExchangePrice((tonumber(m)or 0)/(1+c/100),false))end local j=d:Add("DButton")j:SetFont("font.donate.medium")j:Dock(TOP)j:SetTall(AutoDonate.multiplyResolution(AutoDonate.y,0.08))j:SetText("В корзину")if b==nil or AutoDonate.IsLimited(b._id,b.limit)then j:SetEnabled(false)end local function k(l,m,n)AutoDonate.Cart(l,{value=m},m,n)i:SetText(0)g:SetText(0)end j:DockMargin(100,19,100,19)j.Paint=function(l,m,n)surface.SetMaterial(Material("mzmenu/donate/tocart_btn_noh.png"))surface.SetDrawColor(255,255,255,255)if l:IsHovered()then surface.SetDrawColor(255,255,255,200)end surface.DrawTexturedRect(0,0,m,n)end j.DoClick=function()local l=tonumber(g:GetValue())if l~=nil and l>0 then if b~=nil then if AutoDonate.bonusCredits>0 and b.use_bonus_credits then Derma_Query("Какую валюту использовать?","Выбор валюты:","MZC",function()k(b._id,l)end,"TC",function()k(b._id,l,true)end)else k(b._id,l)end end end end end vgui.Register("cur_ex",a,"Panel")