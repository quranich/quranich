-- <|> Hello, fucker | Taxin2012 and PURP was here | Mysterious Zone Project | mzrp.ru <|>
local a={}function a:SetShipName(c)self.SetName:SetText(c)end function a:SetShipCategory(c)self.SetMainCat=c end function a:SetShipPicture(c)self.SetMainPic=c end function a:SetPicSize(c,d)self.PX,self.PY=c,d end function a:SetPicPos(c,d)self.PPX,self.PPY=c,d end function a:SetShipPrice(c)self.sprice:SetText("От "..c)end function a:SetShipNotes(c)if istable(c)then self.NoteTable=c end end function a:Init()self.SetWorkspace=self:Add("DPanel")self.SetWorkspace.Paint=function()end self.SetWorkspace:SetSize(AutoDonate.multiplyResolution(AutoDonate.x,0.2305),AutoDonate.multiplyResolution(AutoDonate.y,0.325))self.SetMainInfo=self.SetWorkspace:Add("DPanel")self.SetMainInfo:Dock(TOP)self.SetMainInfo:SetTall(AutoDonate.multiplyResolution(AutoDonate.y,0.25))self.SetMainInfo.Paint=function(c,d,e)surface.SetDrawColor(0,0,0,100)surface.DrawRect(0,0,d,e)surface.SetDrawColor(color_white)surface.SetMaterial(self.SetMainPic||Material("mzmenu/donate/icons/currency/case.png"))surface.DrawTexturedRect(d*self.PPX,e*self.PPY,d*self.PX,e*self.PY)end self.SetName=self.SetMainInfo:Add("DLabel")self.SetName:SetText(self.ShipMainName||"")self.SetName:SetFont("font.donate.black.medium")self.SetName:SizeToContents()self.SetName:SetTextColor(Color(247,255,33))self.SetName:SetContentAlignment(5)self.SetName:Dock(BOTTOM)self.SetName:DockMargin(0,0,0,10)self.ComposeSet=self.SetWorkspace:Add("DButton")self.ComposeSet:SetFont("font.donate.medium")self.ComposeSet:Dock(RIGHT)self.ComposeSet:SetWide(AutoDonate.multiplyResolution(AutoDonate.x,0.08))self.ComposeSet:SetText("Составить")self.ComposeSet:DockMargin(0,19,0,19)self.ComposeSet.Paint=function(c,d,e)surface.SetMaterial(Material("mzmenu/donate/tocart_btn_noh.png"))surface.SetDrawColor(255,255,255,255)if c:IsHovered()then surface.SetDrawColor(255,255,255,200)end surface.DrawTexturedRect(0,0,d,e)end self.ComposeSet.DoClick=function()g_panel:GetParent():GetParent():GetParent():CreateAnimation(AutoDonate.animationTime*2,{target={posX=ScrW()*1},easing="outQuint",Think=function(c,d)g_panel:GetParent():GetParent():GetParent():SetPos(g_panel:GetParent():GetParent():GetParent().posX,g_panel:GetParent():GetParent():GetParent().posY)end,OnComplete=function()if IsValid(AutoDonate.donate_pnl)then AutoDonate.donate_pnl:Remove()end vgui.Create("KitFrame")end})end self.spricestart=self.SetWorkspace:Add("DLabel")self.spricestart:SetFont("font.donate.black.small")self.spricestart:Dock(LEFT)self.spricestart:SetText("Стоимость:")self.spricestart:DockMargin(20,0,5,0)self.spricestart:SizeToContents()self.sprice=self.SetWorkspace:Add("DLabel")self.sprice:SetFont("font.donate.black.small")self.sprice:Dock(LEFT)self.sprice:SetTextColor(Color(247,255,33))self.sprice:SetText("от 00000")self.sprice:DockMargin(0,0,0,0)self.sprice:SizeToContents()end vgui.Register("personal_set",a,"Panel")local b={}function b:SetReturnTab(c)self.ReturnTab=c end function b:SetUID(c)self.uid=c end function b:SetPrice(c,d)self.subprices[#self.subprices+1]={_price=c,_ecoprice=d}end function b:ReturnToPrevTab()self.return_tab=self:Add(self.ReturnTab)self.return_tab:Dock(FILL)end function b:SetCallback(c)self.Callback=c()end function b:Init()self.SUBTABLE={}self.dpanel=self:Add("DScrollPanel")self.dpanel:Dock(FILL)self.dpanel:DockMargin(0,0,0,0)self.dpanel.posX,self.dpanel.posY=ScrW()*-1,ScrH()*0 self.dpanel.Paint=function()end self.dpanel:CreateAnimation(AutoDonate.animationTime*2,{target={posX=ScrH()*0},easing="outQuint",Think=function(c,d)self.dpanel:SetPos(self.dpanel.posX,self.dpanel.posY)end,})self.toppanel=self.dpanel:Add("DPanel")self.toppanel:Dock(TOP)self.toppanel:DockMargin(25,25,310,0)self.toppanel.Paint=function(c,d,e)end self.label1=self.toppanel:Add("DLabel")self.label1:SetFont("font.donate.black.small")self.label1.Think=function()self.label1:SetText("Список наборов")end self.label1:SizeToContents()self.label1:Dock(FILL)self.label1:DockMargin(5,0,0,0)self.back=self.toppanel:Add("DImageButton")self.back:Dock(LEFT)self.back:SetWide(AutoDonate.multiplyResolution(AutoDonate.x,0.0155))self.back:DockMargin(0,1,0,1)self.back:SetImage("mzmenu/donate/left_arrow.png")self.back.DoClick=function()self.dpanel:CreateAnimation(AutoDonate.animationTime*2,{target={posX=ScrW()*-1},easing="outQuint",Think=function(c,d)self.dpanel:SetPos(self.dpanel.posX,self.dpanel.posY)end,OnComplete=function()self.dpanel:Remove()self:ReturnToPrevTab()end})end timer.Simple(0.1,function()for c,d in pairs(self.SUBTABLE)do self.subshipment=self.dpanel:Add("DPanel")self.subshipment:Dock(TOP)self.subshipment:SetTall(AutoDonate.multiplyResolution(AutoDonate.y,math.Round(markup.Parse(d.markup):GetHeight()/ScrH(),2)+0.11))self.subshipment.Paint=function(e,f,g)end self.parser_drawer=self.subshipment:Add("DPanel")self.parser_drawer:Dock(TOP)self.parser_drawer:SetTall(AutoDonate.multiplyResolution(AutoDonate.y,math.Round(markup.Parse(d.markup):GetHeight()/ScrH(),2)))self.parser_drawer:DockMargin(25,10,25,25)self.parser_drawer.Paint=function(e,f,g)surface.SetDrawColor(0,0,0,100)surface.DrawRect(0,0,f,g)markup.Parse(d.markup):Draw(f*0,g*0.035,TEXT_ALIGN_LEFT,TEXT_ALIGN_LEFT)end self.buypanel=self.subshipment:Add("DPanel")self.buypanel:Dock(BOTTOM)self.buypanel:DockMargin(20,0,20,0)self.buypanel:SetTall(AutoDonate.multiplyResolution(AutoDonate.y,0.35))self.buypanel.Paint=function(e,f,g)end self.tpanel=self.buypanel:Add("DPanel")self.tpanel:Dock(BOTTOM)self.tpanel:SetTall(AutoDonate.multiplyResolution(AutoDonate.y,0.09))self.tpanel.Paint=function(e,f,g)end self.cartblock=self.tpanel:Add("DPanel")self.cartblock:Dock(RIGHT)self.cartblock:SetWide(AutoDonate.multiplyResolution(AutoDonate.x,0.2))self.cartblock.Paint=function(e,f,g)end self.ecoprice=self.cartblock:Add("DLabel")self.ecoprice:SetFont("font.donate.medium")self.ecoprice:Dock(BOTTOM)self.ecoprice:SetTextColor(Color(255,255,255))self.ecoprice:SetText("Экономия: "..d.ecoprice)self.ecoprice:SizeToContents()self.to_cart=self.cartblock:Add("DButton")self.to_cart:SetFont("font.donate.medium")self.to_cart:Dock(RIGHT)self.to_cart:SetWide(AutoDonate.multiplyResolution(AutoDonate.x,0.08))self.to_cart:SetText("В корзину")self.to_cart:DockMargin(0,0,20,0)self.to_cart.Paint=function(e,f,g)surface.SetMaterial(Material("mzmenu/donate/tocart_btn_noh.png"))surface.SetDrawColor(255,255,255,255)if e:IsHovered()then surface.SetDrawColor(255,255,255,200)end surface.DrawTexturedRect(0,0,f,g)end self.to_cart.DoClick=function()LocalPlayer():EmitSound("weapons/ar2/ar2_empty.wav",75,pitch or 150,0.25)if self.Callback and isfunction(self.Callback)then self.Callback()end end self.spricestart=self.cartblock:Add("DLabel")self.spricestart:SetFont("font.donate.black.medium")self.spricestart:Dock(LEFT)self.spricestart:SetText("Стоимость:")self.spricestart:DockMargin(0,0,5,0)self.spricestart:SizeToContents()self.sprice=self.cartblock:Add("DLabel")self.sprice:SetFont("font.donate.black.medium")self.sprice:Dock(LEFT)self.sprice:SetTextColor(Color(247,255,33))self.sprice:SetText(d.price)self.sprice:DockMargin(0,0,0,0)self.sprice:SizeToContents()end end)end function b:SetMarkUp(c)table.insert(self.SUBTABLE,c)end vgui.Register("set_constructor",b,"Panel")