-- <|> Hello, fucker | Taxin2012 and PURP was here | Mysterious Zone Project | mzrp.ru <|>
local a={}function a:SetShipName(b)self.ShipName:SetText(b)end function a:SetShipCategory(b)self.ShipMainCat=b end function a:SetShipPicture(b)self.ShipMainPic=Material(b)end function a:SetPicSize(b,c)self.PX,self.PY=b,c end function a:SetPicPos(b,c)self.PPX,self.PPY=b,c end function a:CheckLimited()if AutoDonate.IsLimited(self.itemID,self.itemLimit)then self.to_cart:SetEnabled(false)self.spricestart:SetText("Достигнут лимит ("..((self.itemLimit~=0 and self.itemLimit)or 1)..")")self.spricestart:SetTextColor(Color(253,111,111))self.spricestart:SizeToContents()self.sprice:Remove()self.sprice_stock:Remove()return true end return false end function a:SetShipPrice(b)if b==0 then self.to_cart:Remove()self.sprice:Remove()self.spricestart:Remove()self.sprice_stock:Remove()else if self:CheckLimited()==false then self.sprice:SetText(b)self.sprice:SizeToContents()self.price=b end end end function a:SetShipNotes(b)self.NoteTable=b end function a:InitBasic(b,c,d,e,f,g,h)self.itemID=c self.itemLimit=h self:SetPicSize(0.453,0.7425)self:SetPicPos(0.325,0.1)self:SetSize(AutoDonate.getItemSize())self:SetShipCategory(b)self:SetShipName(d)self:SetShipPicture(f)self:SetShipPrice(g)local i=AutoDonate.cache[c]local j=AutoDonate.types[i.type]self.itemCache=i if e~=""then local k=string.Explode("\n",e)if j.GetDescription~=nil then local l=#k+1 k[l]=""k[l+1]=""k[l+2]="-------------------------------------------- *"j.GetDescription(i,k)k[#k+1]="-------------------------------------------- *"end self:SetShipNotes(k)else self.ShipDesc:Remove()end if i.price>0 and i.discount>0 then local k=AutoDonate.GetDiscountPrice(g,i.discount)self:SetShipPrice(k)local l=' '..g..' 'self.sprice_stock:SetText(l)self.sprice_stock:SizeToContents()surface.SetFont("font.donate.black.small")local m=select(1,surface.GetTextSize(l))self.sprice_stock.Paint=function(n,o,p)surface.SetDrawColor(Color(253,111,111))surface.DrawLine(0,p*0.5,m,p*0.5)end else self.sprice_stock:Remove()end end function a:Init()self.ShipWorkspace=self:Add("DPanel")self.ShipWorkspace.Paint=function()end self.ShipWorkspace:SetSize(AutoDonate.multiplyResolution(AutoDonate.x,0.2305),AutoDonate.multiplyResolution(AutoDonate.y,0.325))self.ShipMainInfo=self.ShipWorkspace:Add("DPanel")self.ShipMainInfo:Dock(TOP)self.ShipMainInfo:SetTall(AutoDonate.multiplyResolution(AutoDonate.y,0.25))self.ShipMainInfo.Paint=function(d,e,f)surface.SetDrawColor(0,0,0,100)surface.DrawRect(0,0,e,f)surface.SetDrawColor(color_white)surface.SetMaterial(self.ShipMainPic||Material("mzmenu/donate/icons/currency/case.png"))surface.DrawTexturedRect(e*self.PPX,f*self.PPY,e*self.PX,f*self.PY)end self.ShipName=self.ShipMainInfo:Add("DLabel")self.ShipName:SetText(self.ShipMainName||"")self.ShipName:SetFont("font.donate.black.medium")self.ShipName:SizeToContents()self.ShipName:SetTextColor(Color(247,255,33))self.ShipName:SetContentAlignment(5)self.ShipName:Dock(BOTTOM)self.ShipName:DockMargin(0,0,0,10)self.ShipDesc=self.ShipMainInfo:Add("DImageButton")self.ShipDesc:Dock(TOP)self.ShipDesc:DockMargin(AutoDonate.multiplyResolution(AutoDonate.x,0.219),10,10,0)self.ShipDesc:SetImage("mzmenu/donate/info.png")local b=self:GetParent():GetParent():GetParent():GetParent()self.ShipDesc.DoClick=function()b:CreateAnimation(AutoDonate.animationTime*2,{target={posX=ScrW()*1},easing="outQuint",Think=function(d,e)b:SetPos(b.posX,b.posY)end,OnComplete=function()local d=self.ShipName:GetText()b:Remove()AutoDonate.info_space=b:GetParent():Add("info_shipment")AutoDonate.info_space:Dock(FILL)AutoDonate.info_space:SetShipSecondName(d||"NotValidShipmentName.")AutoDonate.info_space:SetReturnTab(self.ShipMainCat||"currency")for e,f in pairs(self.NoteTable)do AutoDonate.info_space:AddSheetNote(f)end end})end self.to_cart=self.ShipWorkspace:Add("DButton")self.to_cart:SetFont("font.donate.medium")self.to_cart:Dock(RIGHT)self.to_cart:SetWide(AutoDonate.multiplyResolution(AutoDonate.x,0.08))self.to_cart:SetText("В корзину")self.to_cart:DockMargin(0,19,0,19)self.to_cart.Paint=function(d,e,f)surface.SetMaterial(Material("mzmenu/donate/tocart_btn_noh.png"))surface.SetDrawColor(255,255,255,255)if d:IsHovered()then surface.SetDrawColor(255,255,255,200)end surface.DrawTexturedRect(0,0,e,f)end local function c(d)LocalPlayer():EmitSound("weapons/ar2/ar2_empty.wav",75,pitch or 150,0.25)local e=AutoDonate.types[self.itemCache.type]if e.OnCart~=nil then e.OnCart(self.itemID,AutoDonate.GetItemDiscountPrice(self.itemID),d)else AutoDonate.Cart(self.itemID,nil,AutoDonate.GetItemDiscountPrice(self.itemID),d)end end self.to_cart.DoClick=function()LocalPlayer():EmitSound("weapons/ar2/ar2_empty.wav",75,pitch or 150,0.25)if AutoDonate.bonusCredits>0 and self.itemCache.use_bonus_credits then Derma_Query("Какую валюту использовать?","Выбор валюты:","MZC",c,"TC",function()c(true)end)else c()end self:CheckLimited()end self.spricestart=self.ShipWorkspace:Add("DLabel")self.spricestart:SetFont("font.donate.black.small")self.spricestart:Dock(LEFT)self.spricestart:SetText("Стоимость:")self.spricestart:DockMargin(20,0,5,0)self.spricestart:SizeToContents()self.sprice=self.ShipWorkspace:Add("DLabel")self.sprice:SetFont("font.donate.black.small")self.sprice:Dock(LEFT)self.sprice:SetTextColor(Color(247,255,33))self.sprice:SetText("0")self.sprice:DockMargin(0,0,0,0)self.sprice:SizeToContents()self.sprice_stock=self.ShipWorkspace:Add("DLabel")self.sprice_stock:SetFont("font.donate.black.small")self.sprice_stock:Dock(BOTTOM)self.sprice_stock:SetTextColor(Color(253,111,111))self.sprice_stock:DockMargin(AutoDonate.multiplyResolution(AutoDonate.x,-0.02),0,AutoDonate.multiplyResolution(AutoDonate.x,0.05),AutoDonate.multiplyResolution(AutoDonate.y,0.01))end vgui.Register("shipment",a,"Panel")a={}function a:SetShipName(b)self.SetName:SetText(b)end function a:SetShipCategory(b)self.SetMainCat=b end function a:SetShipPicture(b)self.SetMainPic=Material(b)end function a:SetPicSize(b,c)self.PX,self.PY=b,c end function a:SetPicPos(b,c)self.PPX,self.PPY=b,c end function a:SetShipNotes(b)self.NoteTable=b end function a:AddSubshipmentInfo(b)table.insert(self.SubShipmentInfo,b)end function a:Init()self.SubShipmentInfo={}self.SetWorkspace=self:Add("DPanel")self.SetWorkspace.Paint=function()end self.SetWorkspace:SetSize(AutoDonate.multiplyResolution(AutoDonate.x,0.2305),AutoDonate.multiplyResolution(AutoDonate.y,0.325))self.SetMainInfo=self.SetWorkspace:Add("DPanel")self.SetMainInfo:Dock(TOP)self.SetMainInfo:SetTall(AutoDonate.multiplyResolution(AutoDonate.y,0.25))self.SetMainInfo.Paint=function(c,d,e)surface.SetDrawColor(0,0,0,100)surface.DrawRect(0,0,d,e)surface.SetDrawColor(color_white)surface.SetMaterial(self.SetMainPic||Material("mzmenu/donate/icons/currency/case.png"))surface.DrawTexturedRect(d*self.PPX,e*self.PPY,d*self.PX,e*self.PY)end self.SetName=self.SetMainInfo:Add("DLabel")self.SetName:SetText(self.ShipMainName||"")self.SetName:SetFont("font.donate.black.medium")self.SetName:SizeToContents()self.SetName:SetTextColor(Color(247,255,33))self.SetName:SetContentAlignment(5)self.SetName:Dock(BOTTOM)self.SetName:DockMargin(0,0,0,10)self.SetDesc=self.SetMainInfo:Add("DImageButton")self.SetDesc:Dock(TOP)self.SetDesc:DockMargin(AutoDonate.multiplyResolution(AutoDonate.x,0.219),10,10,0)self.SetDesc:SetImage("mzmenu/donate/info.png")local b=self:GetParent():GetParent():GetParent():GetParent()self.SetDesc.DoClick=function()b:CreateAnimation(AutoDonate.animationTime*2,{target={posX=ScrW()*1},easing="outQuint",Think=function(c,d)b:SetPos(b.posX,b.posY)end,OnComplete=function()local c=self.SetName:GetText()b:Remove()AutoDonate.info_space=b:GetParent():Add("info_shipment")AutoDonate.info_space:Dock(FILL)AutoDonate.info_space:SetShipSecondName(c||"NotValidShipmentName.")AutoDonate.info_space:SetReturnTab(self.SetMainCat||"currency")for d,e in pairs(self.NoteTable)do AutoDonate.info_space:AddSheetNote(e)end end})end self.ComposeSet=self.SetWorkspace:Add("DButton")self.ComposeSet:SetFont("font.donate.medium")self.ComposeSet:Dock(RIGHT)self.ComposeSet:SetWide(AutoDonate.multiplyResolution(AutoDonate.x,0.08))self.ComposeSet:SetText("Составить")self.ComposeSet:DockMargin(0,19,0,19)self.ComposeSet.Paint=function(c,d,e)surface.SetMaterial(Material("mzmenu/donate/tocart_btn_noh.png"))surface.SetDrawColor(255,255,255,255)if c:IsHovered()then surface.SetDrawColor(255,255,255,200)end surface.DrawTexturedRect(0,0,d,e)end self.ComposeSet.DoClick=function()b:CreateAnimation(AutoDonate.animationTime*2,{target={posX=ScrW()*1},easing="outQuint",Think=function(c,d)b:SetPos(b.posX,b.posY)end,OnComplete=function()if IsValid(AutoDonate.donate_pnl)then AutoDonate.donate_pnl:Remove()end if IsValid(AutoDonate.kitFrame)then AutoDonate.kitFrame:Remove()end AutoDonate.kitFrame=vgui.Create("KitFrame")AutoDonate.kitFrame:Setup(self.itemID)end})end end function a:InitBasic(b,c,d,e,f,g,h)self.itemID=c self.itemLimit=h self:SetPicSize(0.453,0.7425)self:SetPicPos(0.325,0.1)self:SetSize(AutoDonate.getItemSize())self:SetShipCategory(b)self:SetShipName(d)self:SetShipPicture(f)local i=AutoDonate.cache[c]local j=AutoDonate.types[i.type]if e~=""then local m=string.Explode("\n",e)if j.GetDescription~=nil then local n=#m+1 m[n]=""m[n+1]=""m[n+2]="-------------------------------------------- *"j.GetDescription(i,m)m[#m+1]="-------------------------------------------- *"end self:SetShipNotes(m)else self.SetDesc:Remove()end local k,l=AutoDonate.IsLimited(self.itemID,self.itemLimit),i.discount>0 if k or l then self.sprice_stock=self.SetWorkspace:Add("DLabel")self.sprice_stock:SetFont("font.donate.medium")self.sprice_stock:Dock(LEFT)self.sprice_stock:SetTextColor(Color(253,111,111))self.sprice_stock:DockMargin(AutoDonate.multiplyResolution(AutoDonate.x,0.004),0,0,0)if k then self.ComposeSet:SetEnabled(false)self.sprice_stock:SetText("Достигнут лимит ("..((self.itemLimit~=0 and self.itemLimit)or 1)..")")elseif l then self.sprice_stock:SetText("Скидка "..i.discount.."%")end self.sprice_stock:SizeToContents()end end vgui.Register("kit_ship",a,"Panel")a={}function a:SetShipName(b)self.SetName:SetText(b)end function a:SetShipCategory(b)self.SetMainCat=b end function a:SetShipPicture(b)self.SetMainPic=Material(b)end function a:SetPicSize(b,c)self.PX,self.PY=b,c end function a:SetPicPos(b,c)self.PPX,self.PPY=b,c end function a:SetShipNotes(b)self.NoteTable=b end function a:AddSubshipmentInfo(b)table.insert(self.SubShipmentInfo,b)end function a:Init()self.SubShipmentInfo={}self.SetWorkspace=self:Add("DPanel")self.SetWorkspace.Paint=function()end self.SetWorkspace:SetSize(AutoDonate.multiplyResolution(AutoDonate.x,0.2305),AutoDonate.multiplyResolution(AutoDonate.y,0.325))self.SetMainInfo=self.SetWorkspace:Add("DPanel")self.SetMainInfo:Dock(TOP)self.SetMainInfo:SetTall(AutoDonate.multiplyResolution(AutoDonate.y,0.25))self.SetMainInfo.Paint=function(c,d,e)surface.SetDrawColor(0,0,0,100)surface.DrawRect(0,0,d,e)surface.SetDrawColor(color_white)surface.SetMaterial(self.SetMainPic||Material("mzmenu/donate/icons/currency/case.png"))surface.DrawTexturedRect(d*self.PPX,e*self.PPY,d*self.PX,e*self.PY)end self.SetName=self.SetMainInfo:Add("DLabel")self.SetName:SetText(self.ShipMainName||"")self.SetName:SetFont("font.donate.black.medium")self.SetName:SizeToContents()self.SetName:SetTextColor(Color(247,255,33))self.SetName:SetContentAlignment(5)self.SetName:Dock(BOTTOM)self.SetName:DockMargin(0,0,0,10)self.SetDesc=self.SetMainInfo:Add("DImageButton")self.SetDesc:Dock(TOP)self.SetDesc:DockMargin(AutoDonate.multiplyResolution(AutoDonate.x,0.219),10,10,0)self.SetDesc:SetImage("mzmenu/donate/info.png")local b=self:GetParent():GetParent():GetParent():GetParent()self.SetDesc.DoClick=function()b:CreateAnimation(AutoDonate.animationTime*2,{target={posX=ScrW()*1},easing="outQuint",Think=function(c,d)b:SetPos(b.posX,b.posY)end,OnComplete=function()local c=self.SetName:GetText()b:Remove()AutoDonate.info_space=b:GetParent():Add("info_shipment")AutoDonate.info_space:Dock(FILL)AutoDonate.info_space:SetShipSecondName(c||"NotValidShipmentName.")AutoDonate.info_space:SetReturnTab(self.SetMainCat||"currency")for d,e in pairs(self.NoteTable)do AutoDonate.info_space:AddSheetNote(e)end end})end self.ComposeSet=self.SetWorkspace:Add("DButton")self.ComposeSet:SetFont("font.donate.medium")self.ComposeSet:Dock(RIGHT)self.ComposeSet:SetWide(AutoDonate.multiplyResolution(AutoDonate.x,0.08))self.ComposeSet:SetText("Ссылка")self.ComposeSet:DockMargin(0,19,0,19)self.ComposeSet.Paint=function(c,d,e)surface.SetMaterial(Material("mzmenu/donate/tocart_btn_noh.png"))surface.SetDrawColor(255,255,255,255)if c:IsHovered()then surface.SetDrawColor(255,255,255,200)end surface.DrawTexturedRect(0,0,d,e)end self.ComposeSet.DoClick=function()b:CreateAnimation(AutoDonate.animationTime*2,{target={posX=ScrW()*1},easing="outQuint",Think=function(c,d)b:SetPos(b.posX,b.posY)end,OnComplete=function()gui.OpenURL(AutoDonate.cache[self.itemID].data.link)end})end end function a:InitBasic(b,c,d,e,f,g,h)self.itemID=c self.itemLimit=h self:SetPicSize(0.453,0.7425)self:SetPicPos(0.325,0.1)self:SetSize(AutoDonate.getItemSize())self:SetShipCategory(b)self:SetShipName(d)self:SetShipPicture(f)end vgui.Register("shipment_link",a,"Panel")a={}function a:SetShipName(b)self.ShipName:SetText(b)end function a:SetModel(b,c,d)self.ShipMainInfo:SetModel(b)local e=self.ShipMainInfo:GetEntity()if IsValid(e)==false then return end local f=e:LookupSequence("idle_1_idle_0")if f>0 then self.ShipMainInfo:SetAnimated(true)e:SetSequence(f)end if c~=nil and table.IsEmpty(c)==false then for g,h in next,c do e:SetBodygroup(g,h)end end if d~=nil then e:SetSkin(d)end end function a:CheckLimited()if AutoDonate.IsLimited(self.itemID,self.itemLimit)then self.to_cart:SetEnabled(false)self.spricestart:SetText("Достигнут лимит ("..((self.itemLimit~=0 and self.itemLimit)or 1)..")")self.spricestart:SetTextColor(Color(253,111,111))self.spricestart:SizeToContents()self.sprice:Remove()self.sprice_stock:Remove()return true end return false end function a:SetShipPrice(b)if b==0 then self.to_cart:Remove()self.sprice:Remove()self.spricestart:Remove()self.sprice_stock:Remove()else if self:CheckLimited()==false then self.sprice:SetText(b)self.sprice:SizeToContents()self.price=b end end end function a:SetShipNotes(b)self.NoteTable=b end function a:SetShipCategory(b)self.ShipMainCat=b end function a:InitBasic(b,c,d,e,f,g,h)self.itemID=c self.itemLimit=h self:SetShipCategory(b)self:SetSize(AutoDonate.getItemSize())self:SetShipName(d)local i=AutoDonate.cache[c]self:SetShipPrice(i.price)self.ShipMainInfo:SetCamPos((i.data.wepItem~=nil and Vector(-30,0,0))or Vector(-100,0,34))self:SetModel(i.data.model or"models/error.mdl",i.data.bgs,i.data.skin)local j=AutoDonate.types[i.type]if e~=""then local k=string.Explode("\n",e)if j.GetDescription~=nil then local l=#k+1 k[l]=""k[l+1]=""k[l+2]="-------------------------------------------- *"j.GetDescription(i,k)k[#k+1]="-------------------------------------------- *"end self:SetShipNotes(k)else self.ShipDesc:Remove()end if i.price>0 and i.discount>0 then local k=AutoDonate.GetDiscountPrice(i.price,i.discount)self.sprice:SetText(k)self.price=k self.sprice_stock:SetText(i.price)self.sprice_stock:SizeToContents()self.sprice_stock.Paint=function(l,m,n)surface.SetDrawColor(Color(253,111,111))surface.DrawLine(0,0,m*.55,n)end else self.sprice_stock:Remove()end end function a:Init()self.ShipWorkspace=self:Add("DPanel")self.ShipWorkspace:SetSize(AutoDonate.multiplyResolution(AutoDonate.x,0.2305),AutoDonate.multiplyResolution(AutoDonate.y,0.325))local b=AutoDonate.multiplyResolution(AutoDonate.y,0.25)self.ShipWorkspace.Paint=function(d,e,f)surface.SetDrawColor(0,0,0,100)surface.DrawRect(0,0,e,b)end self.ShipMainInfo=self.ShipWorkspace:Add("DAdjustableModelPanel")self.ShipMainInfo.LayoutEntity=function(d,e)if self.ShipMainInfo.bAnimated then self.ShipMainInfo:RunAnimation()end if input.IsMouseDown(MOUSE_FIRST)or input.IsMouseDown(MOUSE_RIGHT)or input.IsMouseDown(MOUSE_MIDDLE)then return end e:SetAngles(Angle(0,RealTime()*10%360,0))end self.ShipMainInfo:Dock(TOP)self.ShipMainInfo:SetTall(b)self.ShipName=self.ShipMainInfo:Add("DLabel")self.ShipName:SetText(self.ShipMainName||"")self.ShipName:SetFont("font.donate.black.medium")self.ShipName:SizeToContents()self.ShipName:SetTextColor(Color(247,255,33))self.ShipName:SetContentAlignment(5)self.ShipName:Dock(BOTTOM)self.ShipName:DockMargin(0,0,0,10)self.ShipDesc=self.ShipMainInfo:Add("DImageButton")self.ShipDesc:Dock(TOP)self.ShipDesc:DockMargin(AutoDonate.multiplyResolution(AutoDonate.x,0.219),10,10,0)self.ShipDesc:SetImage("mzmenu/donate/info.png")local c=self:GetParent():GetParent():GetParent():GetParent()self.ShipDesc.DoClick=function()c:CreateAnimation(AutoDonate.animationTime*2,{target={posX=ScrW()*1},easing="outQuint",Think=function(d,e)c:SetPos(c.posX,c.posY)end,OnComplete=function()c:Remove()AutoDonate.info_space=c:GetParent():Add("info_shipment")AutoDonate.info_space:Dock(FILL)AutoDonate.info_space:SetShipSecondName(self.ShipName:GetText())AutoDonate.info_space:SetReturnTab(self.ShipMainCat||"currency")for d,e in pairs(self.NoteTable)do AutoDonate.info_space:AddSheetNote(e)end end})end self.to_cart=self.ShipWorkspace:Add("DButton")self.to_cart:SetFont("font.donate.medium")self.to_cart:Dock(RIGHT)self.to_cart:SetWide(AutoDonate.multiplyResolution(AutoDonate.x,0.08))self.to_cart:SetText("В корзину")self.to_cart:DockMargin(0,19,0,19)self.to_cart.Paint=function(d,e,f)surface.SetMaterial(Material("mzmenu/donate/tocart_btn_noh.png"))surface.SetDrawColor(255,255,255,255)if d:IsHovered()then surface.SetDrawColor(255,255,255,200)end surface.DrawTexturedRect(0,0,e,f)end self.to_cart.DoClick=function()LocalPlayer():EmitSound("weapons/ar2/ar2_empty.wav",75,pitch or 150,0.25)local d=AutoDonate.types[AutoDonate.cache[self.itemID].type]if d.OnCart~=nil then d.OnCart(self.itemID,AutoDonate.GetItemDiscountPrice(self.itemID))else AutoDonate.Cart(self.itemID,nil,AutoDonate.GetItemDiscountPrice(self.itemID))end self:CheckLimited()end self.spricestart=self.ShipWorkspace:Add("DLabel")self.spricestart:SetFont("font.donate.black.small")self.spricestart:Dock(LEFT)self.spricestart:SetText("Стоимость:")self.spricestart:DockMargin(20,0,5,0)self.spricestart:SizeToContents()self.sprice=self.ShipWorkspace:Add("DLabel")self.sprice:SetFont("font.donate.black.small")self.sprice:Dock(LEFT)self.sprice:SetTextColor(Color(247,255,33))self.sprice:SetText("0")self.sprice:DockMargin(0,0,0,0)self.sprice:SizeToContents()self.sprice_stock=self.ShipWorkspace:Add("DLabel")self.sprice_stock:SetFont("font.donate.medium")self.sprice_stock:Dock(BOTTOM)self.sprice_stock:SetTextColor(Color(253,111,111))self.sprice_stock:DockMargin(AutoDonate.multiplyResolution(AutoDonate.x,-0.02),0,AutoDonate.multiplyResolution(AutoDonate.x,0.05),AutoDonate.multiplyResolution(AutoDonate.y,0.01))end vgui.Register("shipment_model",a,"Panel")a={}function a:SetShipPicture(b)self.ShipMainPic=Material(b)end function a:SetPicSize(b,c)self.PX,self.PY=b,c end function a:SetPicPos(b,c)self.PPX,self.PPY=b,c end function a:Init()self:SetPicSize(0.453,0.7425)self:SetPicPos(0.325,0.1)self:SetSize(AutoDonate.getItemSize())self.ShipWorkspace=self:Add("DPanel")self.ShipWorkspace.Paint=function()end self.ShipWorkspace:SetSize(AutoDonate.multiplyResolution(AutoDonate.x,0.2305),AutoDonate.multiplyResolution(AutoDonate.y,0.325))self.ShipMainInfo=self.ShipWorkspace:Add("DPanel")self.ShipMainInfo:Dock(TOP)self.ShipMainInfo:SetTall(AutoDonate.multiplyResolution(AutoDonate.y,0.25))self.ShipMainInfo.Paint=function(c,d,e)surface.SetDrawColor(0,0,0,100)surface.DrawRect(0,0,d,e)surface.SetDrawColor(color_white)surface.SetMaterial(self.ShipMainPic||Material("mzmenu/donate/icons/currency/case.png"))surface.DrawTexturedRect(d*self.PPX,e*self.PPY,d*self.PX,e*self.PY)end self.ShipName=self.ShipMainInfo:Add("DLabel")self.ShipName:SetFont("font.donate.black.medium")self.ShipName:SizeToContents()self.ShipName:SetTextColor(Color(247,255,33))self.ShipName:SetContentAlignment(5)self.ShipName:Dock(BOTTOM)self.ShipName:DockMargin(0,0,0,10)self.to_cart=self.ShipWorkspace:Add("DButton")self.to_cart:SetFont("font.donate.medium")self.to_cart:Dock(RIGHT)self.to_cart:SetWide(AutoDonate.multiplyResolution(AutoDonate.x,0.08))self.to_cart:SetText("Выбор")self.to_cart:DockMargin(0,19,0,19)self.to_cart.Paint=function(c,d,e)surface.SetMaterial(Material("mzmenu/donate/tocart_btn_noh.png"))surface.SetDrawColor(255,255,255,255)if c:IsHovered()then surface.SetDrawColor(255,255,255,200)end surface.DrawTexturedRect(0,0,d,e)end local b=self:GetParent():GetParent():GetParent():GetParent()self.to_cart.DoClick=function()LocalPlayer():EmitSound("weapons/ar2/ar2_empty.wav",75,pitch or 150,0.25)b:CreateAnimation(AutoDonate.animationTime*2,{target={posX=ScrW()*-1},easing="outQuint",Think=function(c,d)b:SetPos(b.posX,b.posY)end,OnComplete=function()b:Remove()local c=b:GetParent():Add("autodonate_"..self.catID)c:Dock(FILL)function c:SetReturnTab(d)self.ReturnTab=d self.mainDpanel.label:SetTextInset(AutoDonate.multiplyResolution(AutoDonate.y,.05),AutoDonate.multiplyResolution(AutoDonate.y,-0.002))self.mainDpanel.label:SizeToContents()local e=self.mainDpanel.toppanel:Add("DImageButton")e:Dock(LEFT)e:SetWide(AutoDonate.multiplyResolution(AutoDonate.x,0.0155))e:DockMargin(0,1,0,1)e:SetImage("mzmenu/donate/left_arrow.png")e.DoClick=function()self.mainDpanel:CreateAnimation(AutoDonate.animationTime*2,{target={posX=ScrW()*1},easing="outQuint",Think=function(f,g)self.mainDpanel:SetPos(self.mainDpanel.posX,self.mainDpanel.posY)end,OnComplete=function()self.mainDpanel:Remove()self:ReturnToPrevTab()end})end end function c:ReturnToPrevTab()self.return_tab=self:Add("autodonate_"..self.ReturnTab)self.return_tab:Dock(FILL)end c:SetReturnTab("subcat")AutoDonate.info_space=c end})end end function a:SetupCategory(b,c,d)self.ShipName:SetText(b)self:SetShipPicture(d)self.catID=c end vgui.Register("shipment_subcat_dummy",a,"Panel")