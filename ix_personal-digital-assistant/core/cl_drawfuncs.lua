-- <|> Hello, fucker | Taxin2012 and PURP was here | Mysterious Zone Project | mzrp.ru <|>
local a=render.PushRenderTarget local b=render.Clear local c=render.RenderView local d=hook.Call local e=render.Capture local f=render.PopRenderTarget local g=vgui.GetControlTable local select=select local h=math.Clamp local ScrW=ScrW local ScrH=ScrH local i=render.SetScissorRect local derma=derma local ipairs=ipairs local j=surface.SetMaterial local k=surface.SetDrawColor local surface=surface local l=surface.DrawLine local GetRenderTarget=GetRenderTarget local CreateMaterial=CreateMaterial local m=hook.Add local n=hook.Remove local LocalPlayer=LocalPlayer local IsValid=IsValid local o=render.PushRenderTarget local p=render.Clear local q=render.RenderView local r=hook.Call local s=render.Capture local t=render.PopRenderTarget local u=surface.DrawPartialTexturedRect local v=kouka.utils.RandomString local w=ix.plugin.list["personal-digital-assistant"]ix.pda.draw=ix.pda.draw or{}local x=ix.util.GetMaterial("purp/stalker/ui/ui_actor_pda.png")function ix.pda.draw.Title(B,C,D,E)j(x)k(color_white)u(B+D-20,C,20,E,76,29,20,20,1024,1024)u(B,C,D-20,E,12,39,22,22,1024,1024)k(127,127,127)l(0,0,D-20,0)l(0,0,0,E)l(0,E-1,D,E-1)end function ix.pda.draw.FrameTop(B,C,D,E)j(x)k(color_white)u(B,C,20,20,0,29,20,20,1024,1024)u(B+D-20,C,20,20,76,29,20,20,1024,1024)u(B+20,C,D-40,20,20,29,54,20,1024,1024)u(B+0,C+20,20,E-40,0,39,20,14,1024,1024)u(B+20,C+E-20,D-40,20,10,43,67,20,1024,1024)u(B+D-20,C+20,20,E-40,935,158,20,17,1024,1024)u(B+20,C+20,D-40,E-40,12,39,22,22,1024,1024)u(0,E-20,20,19,0,39,20,14,1024,1024)u(0,E-1,20,1,20,62,20,1,1024,1024)u(D-20,E-20,20,19,76,48,20,5,1024,1024)u(D-20,E-1,20,1,20,62,20,1,1024,1024)end function ix.pda.draw.Frame(B,C,D,E)j(x)k(color_white)u(B,C,20,20,0,29,20,20,1024,1024)u(B+D-20,C,20,20,76,29,20,20,1024,1024)u(B+0,C+E-20,20,20,0,43,20,20,1024,1024)u(B+D-20,C+E-20,20,20,935,165,20,20,1024,1024)u(B+20,C,D-40,20,20,29,54,20,1024,1024)u(B+0,C+20,20,E-40,0,39,20,14,1024,1024)u(B+20,C+E-20,D-40,20,10,43,67,20,1024,1024)u(B+D-20,C+20,20,E-40,935,158,20,17,1024,1024)u(B+20,C+20,D-40,E-40,12,39,22,22,1024,1024)end ix.pda.RV={}function ix.pda.RenderView_Start(B,C,D,E)B=B:lower()ix.pda.RV[B]=ix.pda.RV[B]or{rt=GetRenderTarget("ixpda_RV"..B,C.w,C.h),texture=CreateMaterial("ixpda_RVMat"..B,"UnlitGeneric",{["$basetexture"]="ixpda_RV"..B}),}C.fov=C.fov or 60 C.zfar=C.zfar or 6000 C.drawviewmodel=C.drawviewmodel or false ix.pda.RV[B].params=C ix.pda.RV[B].startfuncs=D ix.pda.RV[B].endfuncs=E end function ix.pda.RenderView_RequestTexture(B)B=B:lower()if ix.pda.RV[B]then return ix.pda.RV[B].texture end end function ix.pda.RenderView_RequestRT(B)B=B:lower()if ix.pda.RV[B]then return ix.pda.RV[B].rt end end function ix.pda.RenderView_RequestScreenshot(B,C,D)B=B:lower()if ix.pda.RV[B]then local E=ix.pda.RV[B].params ix.pda.RV[B].Screenshot={dir=C,format="jpg",quality=90,x=E.x,y=E.y,w=E.w,h=E.h,}end end function ix.pda.RenderView_End(B)B=B:lower()ix.pda.RV[B]=nil end local y=false m("ShouldDrawLocalPlayer","ixpda_RV.ShouldDrawLocalPlayer",function()if y then return true end end)m("PreDrawSkyBox","ixpda_RV.PreDrawSkyBox",function()if y then return true end end)local z={["camera"]="pdacamerascreen",["location"]="pdalocationscreen",}n("HUDPaint","ixpda_RV.HUDPaint")n("PostRenderVGUI","ixpda_RV.PostRenderVGUI")n("PostRender","ixpda_RV.PostRender")local function A(B)local C=LocalPlayer():GetActiveWeapon()if IsValid(C)and C:GetClass()=="mz-personal-digital-assistant"then local D=ix.pda and ix.pda.activeApp or nil if z[D]then for E,F in next,ix.pda.RV do if E~=z[D]then continue end if(B=="HUDPaint"and E=="pdalocationscreen")or(B=="PostRenderVGUI"and E=="pdacamerascreen")then continue end o(F.rt)p(0,0,0,0,true,true)if F.startfuncs then F.startfuncs()end if F.params.drawviewmodel then y=true end q(F.params)y=false surface.SetDrawColor(color_white)local G=F.Screenshot if G then local H=G.dir if r("PrePDACamera_MakePhoto",nil,H)~=false then r("PostPDACamera_MakePhoto",nil,H,s(G))end F.Screenshot=nil end if F.endfuncs then F.endfuncs()end t()end end end end m("PostRenderVGUI","ixpda_RV.PostRenderVGUI",function()A("PostRenderVGUI")end)m("HUDPaint","ixpda_RV.HUDPaint",function()A("HUDPaint")end)do local B=g("ixTooltip")function B:Paint(C,D)self:PaintUnder()self.bRaised=LocalPlayer():IsWepRaised()if(!self.bClosing)then if(self.bEntity and IsValid(self.entity)and self.bArrowFollowEntity)then local G=self.entity local H=select(1,G:GetBonePosition(G:LookupBone("ValveBiped.Bip01_Spine")or-1))or G:LocalToWorld(G:OBBCenter())H=H:ToScreen()self.arrowX=h(H.x,0,ScrW())self.arrowY=h(H.y,0,ScrH())end end local E,F=self:GetPos()i(E,F,E+C*self.fraction,F+D,true)derma.SkinFunc("PaintTooltipBackground",self,C,D)for G,H in ipairs(self:GetChildren())do if(IsValid(H))then H:PaintManual()end end i(0,0,0,0,false)end end