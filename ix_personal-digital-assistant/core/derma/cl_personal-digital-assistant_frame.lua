-- <|> Hello, fucker | Taxin2012 and PURP was here | Mysterious Zone Project | mzrp.ru <|>
local Color=Color local a=surface.SetMaterial local b=surface.SetDrawColor local surface=surface local LocalPlayer=LocalPlayer local c=hook.Run local SortedPairsByMemberValue=SortedPairsByMemberValue local d=vgui.Create local IsValid=IsValid local e=timer.Simple local f=vgui.Register local g=draw.GetFontHeight local h=vgui.GetHoveredPanel local i=string.find local j=gui.EnableScreenClicker local k=ix.plugin.list["personal-digital-assistant"]local l=ix.util.GetMaterial("purp/stalker/ui/ui_actor_pda.png","smooth")local m=ix.util.GetMaterial('purp/stalker/ui/ui_actor_widescreen_sidepanels.png',"smooth")local n,o="ui.Tahoma-s8","ui.Tahoma-s8"local p=Color(150,150,150,255)local q={}function q:InitPanel()self:DockPadding(0,0,self:GetWide()*.01,0)self:SetPaintedManually(true)local s="%d.%m.2011 - %H:%M"local t=ix.date.GetFormatted(s,ix.date.Get():addminutes(639))local u=self:Add("DLabel")u:SetFont(n)u:SetContentAlignment(5)u:Dock(RIGHT)u:SetTextColor(base_color)u:SetText(t)u:SizeToContents()u.Think=function(x)t=ix.date.GetFormatted(s,ix.date.Get():addminutes(639))x:SetText(t)end local v=self:Add("EditablePanel")v:Dock(FILL)v:DockMargin(0,0,self:GetWide()*.01,0)local w=v:Add("EditablePanel")w:Dock(FILL)w:DockMargin(self:GetWide()*.02,0,self:GetWide()*.02,0)w:NoClipping(true)self.horizontalScroll=w:Add("stalker-pda.DHorizontalScroller")self.horizontalScroll:Dock(FILL)self.horizontalScroll:SetOverlap(20)self.horizontalScroll.btnLeft:SetParent(v)self.horizontalScroll.btnLeft.Paint=function(x,y,z)a(l)b(color_white)surface.DrawPartialTexturedRect(0,0,y,z,205,self:IsHovered()and 64 or 96,32,32,1024,1024)end self.horizontalScroll.btnRight:SetParent(v)self.horizontalScroll.btnRight.Paint=function(x,y,z)a(l)b(color_white)surface.DrawPartialTexturedRect(0,0,y,z,237,self:IsHovered()and 64 or 96,32,32,1024,1024)end self:InitApps()end function q:InitApps()local s,t=LocalPlayer(),{}self.horizontalScroll:Clear()c("PDA_RegisterApp",t)for u,v in SortedPairsByMemberValue(t,"order")do ix.pda.listApps[u]=v local w=v.GetName and v:GetName(s)or(v.name or"name")local x=v.GetDescription and v:GetDescription(s)or w local y=d("DButton",self.horizontalScroll)y:SetFont(o)y:SetText(w)y:SizeToContents()y:SetWide(y:GetWide()+54)y.Paint=function(z,A,B)a(l)b(color_white)local C=ix.pda.activeApp==u and true or z:IsHovered()surface.DrawPartialTexturedRect(0,0,27,B,C and 628 or 282,215,27,27,1024,1024)surface.DrawPartialTexturedRect(27,0,A-(27*2),B,C and 660 or 309,215,3,27,1024,1024)surface.DrawPartialTexturedRect(A-27,0,27,B,C and 773 or 427,215,27,27,1024,1024)end if v.PaintOverButton then y.PaintOver=v.PaintOverButton end y.DoClick=function(z)local A=ix.pda.BodyPanel()if IsValid(A)and v.DrawApp then A:Clear()ix.pda.activeApp=u v.DrawApp(v,A)end end self.horizontalScroll:AddPanel(y)end e(.25,function()local u="character"local v=ix.pda.BodyPanel()if IsValid(v)and t[u]and t[u].DrawApp then v:Clear()ix.pda.activeApp=u t[u].DrawApp(t[u],v)end end)end function q:SetTitle(s)self.title:SetText(s)if self.title:GetContentSize()>self.title:GetWide()then self.title:SizeToContents()end end function q:GetTitle()return self.title:GetText()or""end function q:Paint(s,t)a(l)b(color_white)surface.DrawPartialTexturedRect(0,0,15,t,197,1,15,27,1024,1024)surface.DrawPartialTexturedRect(15,0,s-40,t,269,1,19,27,1024,1024)surface.DrawPartialTexturedRect(s-25,0,25,t,272,1,25,27,1024,1024)end f("stalkerMainFramePDA.PanelApps",q,"EditablePanel")local r={}function r:Init()local s=ix.gui.pdaMainFrame if IsValid(s)then s:Remove()end local t,u=ix.pda.GetFrameSize()local v=t*.01 self:SetSize(t,u)self:MakePopup()self:SetKeyboardInputEnabled(false)ix.gui.pdaMainFrame=self local w=g(n)*1.35 self.panelApps=self:Add("stalkerMainFramePDA.PanelApps")self.panelApps:SetPos(v,u*.03)self.panelApps:SetSize(t-(v*2),w)self.panelApps:InitPanel()self.body=self:Add("EditablePanel")self.body:SetPos(0,u*.035+w+v)self.body:SetSize(t,u-(w+v*3.5))end function r:Think()local s=h()if IsValid(s)then local v=i(s:GetName():lower(),"entry")self:SetKeyboardInputEnabled(v)end local t=LocalPlayer()local u=t:GetActiveWeapon()if IsValid(u)and u:GetClass()=="mz-personal-digital-assistant"then local v=(u.IsZoom or false)LocalPlayer().hideStalkerCursor=v self:SetMouseInputEnabled(v)j(v)else LocalPlayer().hideStalkerCursor=false self:SetMouseInputEnabled(false)self:Remove()end end function r:Paint(s,t)ix.pda.draw.Frame(0,0,s,t)end f("stalkerMainFramePDA",r,"EditablePanel")if IsValid(ix.gui.pdaMainFrame)then ix.gui.pdaMainFrame=d("stalkerMainFramePDA")ix.gui.pdaMainFrame:SetPaintedManually(true)end