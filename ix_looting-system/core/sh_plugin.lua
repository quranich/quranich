-- <|> Hello, fucker | Taxin2012 and PURP was here | Mysterious Zone Project | mzrp.ru <|>
local CAMI=CAMI local a=net.Start local b=net.WriteTable local c=SERVER and net.Send local assert=assert local d=math.random local e=player.GetAll local f=player.GetHumans local g=game.MaxPlayers local h=ents.FindByClass local IsValid=IsValid local i=ix.plugin.list["looting-system"]i.name="Looting system v2"i.author="PURP"i.description=""ix.looting=ix.looting or{}CAMI.RegisterPrivilege({Name="Helix - Looting Menu",MinAccess="superadmin"})local function j(k,l)local m,n=k,{}for o,p in next,m do n[#n+1]={index=o,name=p.name,}end a("lootingSystem.OpenAdminMenu")b(n)c(l)end ix.command.Add("LootingAdminMenu",{description="Система ЛУТа - Админ меню",privilege="Looting Menu",superAdminOnly=true,OnRun=function(self,k,l,m)j(ix.looting.GetData(),k)end})function ix.looting.randomChance(k)assert(k>=0 and k<=100)return k>=d(1,100)end if SERVER then function ix.looting.SetData(k)local l={}for n,o in next,e()do if CAMI.PlayerHasAccess(o,"Helix - Looting Menu",nil)==true then l[#l+1]=o end end local m={}for n,o in next,k do m[#m+1]={index=n,name=o.name,}end a("lootingSystem.OpenAdminMenuSetData")b(m)c(l)ix.data.Set("looting-system",k)end end function ix.looting.GetData()return ix.data.Get("looting-system",{},false,false,true)end function ix.looting.GetPlayerProcent()local k=#f()local l=g()return k/l end function ix.looting.GetCountLoot(k)local l=h("mz_looting")local m=0 if k then for n=1,#l do local o=l[n]if IsValid(o)and o:GetLootingIndex()==k then m=m+1 end end else m=#l end return m end ix.util.Include("sv_plugin.lua")ix.util.Include("cl_plugin.lua")