-- <|> Hello, fucker | Taxin2012 and PURP was here | Mysterious Zone Project | mzrp.ru <|>
local ix=ix local Color=Color local a=surface.SetFont local b=surface.GetTextSize local c=surface.SetDrawColor local d=surface.DrawRect local derma=derma local e=surface.SetTextColor local f=surface.SetTextPos local g=surface.DrawText local LocalPlayer=LocalPlayer local ScrW=ScrW local ScrH=ScrH local h=surface.SetMaterial local i=surface.DrawTexturedRect local Vector=Vector local j=render.DrawWireframeBox local k=table.insert local l=table.RemoveByValue local m=net.Start local n=net.WriteString local o=net.WriteUInt local p=net.WriteTable local q=net.SendToServer local r=ix.plugin.list["door-system"]local s="POSITIONS_CARDS"local t=ix.util.GetMaterial("icon16/arrow_in.png")local function u(y,z,A,B,C,D)B=B or"ixSubTitleFont"D=D or 8 C=C or Color(88,88,88,255)a(B)local E,F=b(A)local G,H=E+D*2,F+D*2 ix.util.DrawBlurAt(y,z,G,H)c(0,0,0,40)d(y,z,G,H)derma.SkinFunc("DrawImportantBackground",y,z,G,H,C)e(color_white)f(y+D,z+D)g(A)return H end ix.doorsSystem.RegisterEditModeHook(s,"HUDPaint",function(y)local z=LocalPlayer()local A=z:GetPos()local B,C=ScrW(),ScrH()local D=32 local E,F=D,D*1.75 F=F+u(E,F,"Редактирование спавн позиций для ключ карт","ui.Tahoma-10",ix.config.Get("color"))F=F+u(E,F,"ЛКМ - Зарегистрировать новую позицию","ui.Tahoma-7")F=F+u(E,F,"ПКМ - Удалить существующую позицию","ui.Tahoma-7")F=F+u(E,F,"RELOAD (Перезарядка) - Сохранить позиции","ui.Tahoma-7")F=F+u(E,F,"Всего позиций: "..#y,"ui.Tahoma-7",ix.config.Get("color"))for G=1,#y do local H=y[G]local I=H:ToScreen()local J=16 local K,L=I.x-J*0.5,I.y-J*0.5 c(color_white)h(t)i(K,L,J,J)ix.util.DrawText("#"..G,I.x,I.y,color_white,TEXT_ALIGN_CENTER,TEXT_ALIGN_TOP,"ui.Tahoma-7",255)end end)ix.doorsSystem.RegisterEditModeHook(s,"PostDrawTranslucentRenderables",function(y)local z=5 local A,B=Vector(-z,-z,0),Vector(z,z,z)for C=1,#y do local D=y[C]j(D,angle_zero,A,B,Color(255,255,255),true)end end)local function v()local y=ix.doorsSystem.GetEditModeType()if y~=s then return end local z=LocalPlayer():GetEyeTraceNoCursor().HitPos k(ix.doorsSystem_editmode.reading_data,z)end local function w()local y=ix.doorsSystem.GetEditModeType()if y~=s then return end local z=LocalPlayer():GetEyeTraceNoCursor().HitPos local A=ix.doorsSystem_editmode.reading_data for B=1,#A do local C=A[B]if z:DistToSqr(C)<=75 then l(ix.doorsSystem_editmode.reading_data,C)break end end end local function x()local y=ix.doorsSystem.GetEditModeType()if y==s then m("doors.admin-menu.edit-mode-disable")n(ix.doorsSystem_editmode.mode_type)o(ix.doorsSystem_editmode.dungeon_index,8)n(ix.doorsSystem_editmode.dungeon_name)p(ix.doorsSystem_editmode.reading_data)q()ix.doorsSystem_editmode=nil end end ix.doorsSystem.RegisterEditModeHook(s,"PlayerBindPress",function(y,z,A,B)if((A:find("invnext")or A:find("invprev"))and B)then return true elseif(A:find("attack2")and B)then w()return true elseif(A:find("attack")and B)then v()return true elseif(A:find("reload")and B)then x()return true end end)