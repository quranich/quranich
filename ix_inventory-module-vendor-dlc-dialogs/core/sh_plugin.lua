-- <|> Hello, fucker | Taxin2012 and PURP was here | Mysterious Zone Project | mzrp.ru <|>
local a=ix.plugin.list["inventory-module-vendor-dlc-dialogs"]a.name="[Module Inventory - Vendors] DLC - dialogs"a.author="PURP"a.description=""ix.dlc_vendor=ix.dlc_vendor or{}ix.dlc_vendor.dialogs=ix.dlc_vendor.dialogs or{}CAMI.RegisterPrivilege({Name="Helix - Manage Dialogs",MinAccess="superadmin"})ix.command.Add("DialogsAdminMenu",{description="Система диалогов",privilege="Manage Dialogs",superAdminOnly=true,OnRun=function(self,b)net.Start("dialogSystem_OpenAdminMenuFrame")net.Send(b)end})hook.Add("VendorDLC.NET.ixVendorEdit",a.uniqueID.."_Dialogs",function(b,c,d)if b=="dialogIndex"then d:SetNWString("dialogIndex",c or"")end if b=="disableVoice"then local e=c or false d:SetNWBool("disableVoice",e)end end)properties.Add("vendor_edit_dialog",{MenuLabel="Редактировать Vendor/Dialog",Order=999,MenuIcon="icon16/user_edit.png",Filter=function(self,b,c)if(!IsValid(b))then return false end if(b:GetClass()!="ix_vendor")then return false end if(!gamemode.Call("CanProperty",c,"vendor_edit_dialog",b))then return false end return CAMI.PlayerHasAccess(c,"Helix - Manage Dialogs",nil)end,Action=function(self,b)self:MsgStart()net.WriteEntity(b)self:MsgEnd()end,Receive=function(self,b,c)local d=net.ReadEntity()if(!IsValid(d))then return end if(!self:Filter(d,c))then return end d.receivers[#d.receivers+1]=c local e={}for f,g in pairs(d.items)do if(!table.IsEmpty(g))then e[f]=g end end c.ixVendor=d net.Start("dialogSystem_OpenVendorEditFrame")net.WriteEntity(d)net.WriteUInt(d.money or 0,16)net.WriteTable(e)net.WriteFloat(d.scale or 0.5)net.WriteTable(d.messages)net.WriteTable(d.factions)net.WriteTable(d.classes)net.Send(c)end})ix.util.Include("sv_plugin.lua")ix.util.Include("cl_plugin.lua")