-- <|> Hello, fucker | Taxin2012 and PURP was here | Mysterious Zone Project | mzrp.ru <|>
local ix=ix local a=math.Round local b=hook.Add local CAMI=CAMI local c=ix.plugin.list["inventory-module-weight"]c.name="Module Inventory - Weight"c.author="PURP"c.description=""ix.weight=ix.weight or{}ix.weight.max_weight=25 ix.util.Include("sh_weight.lua")ix.util.Include("sv_weight.lua")function ix.weight.WeightString(d)return a(d,2).." кг"end function ix.weight.BaseWeight(d)local e=ix.weight.max_weight local f=d:GetEquipmentArmor()local g=d:GetEquipmentBackpack()local h=d:GetEquipmentModifier()local i=d:GetEquipmentArtefacts()local j={}for l,m in next,i do if m.slotIndex=="slotArtefact"and m.artCount then local n=m:GetData("artefacts",{})for o,p in next,n do local q=ix.item.list[p.uid]if q then j[#j+1]=q end end else j[#j+1]=m end end local k=0 k=k+e if f then k=k+(f.weightModify or 0)local l=f:HasUpgrades()if l then local m=f:GetUpgrades()for n,o in next,m do for p,q in next,o do if ix.upgradeRepair then local r=ix.upgradeRepair:GetUpgradeProtectStat(n,q)if r and r["WEIGHT"]then k=k+r["WEIGHT"]end end end end end end for l,m in next,j do if m.protectStats and m.protectStats["WEIGHT"]then k=k+(m.protectStats["WEIGHT"]or 0)end end if g then k=k+(g.weightModify or 0)end if h then k=k+(h.weightModify or 0)end k=math.max(0,k)return a(k,2)end function ix.weight.CanCarry(d,e,f)return(d+e)<=ix.weight.BaseWeight(f)end b("StartCommand",c.uniqueID..".StartCommand",function(d,e)if d:IsBot()==false then local f=d:GetCharacter()local g=d:GetMoveType()==MOVETYPE_NOCLIP and not d:InVehicle()if CAMI.PlayerHasAccess(d,"Helix - VCAdd",nil)==false then if ix.weight and f and g==false then local h=ix.weight.BaseWeight(f)local i=f:GetData("carry",0)i=i/h if i>=1.2 then e:SetForwardMove(0)e:SetSideMove(0)e:RemoveKey(IN_JUMP)e:RemoveKey(IN_RUN)e:RemoveKey(IN_WALK)end end end end end)b("CustomAdjustStaminaOffset",c.uniqueID..".CustomAdjustStaminaOffset",function(d,e)local f=d:GetCharacter()local g=d:GetMoveType()==MOVETYPE_NOCLIP and not d:InVehicle()if ix.weight and f then local h=ix.weight.BaseWeight(f)local i=f:GetData("carry",0)i=i/h if i>=1.2 and e<0 then return e*0 elseif i>=1 and e<0 then return(i*2)*e end end end)