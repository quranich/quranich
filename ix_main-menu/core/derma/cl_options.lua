-- <|> Hello, fucker | Taxin2012 and PURP was here | Mysterious Zone Project | mzrp.ru <|>
local ix=ix local a=surface.SetMaterial local b=surface.SetDrawColor local surface=surface local c=gui.ActivateGameUI local RunConsoleCommand=RunConsoleCommand local LocalPlayer=LocalPlayer local d=gui.HideGameUI local e=draw.GetFontHeight local pairs=pairs local Color=Color local f=surface.DrawRect local SortedPairs=SortedPairs local L=L local g=surface.SetFont local select=select local h=surface.GetTextSize local i=surface.SetTextColor local j=surface.SetTextPos local k=surface.DrawText local l=table.sort local tobool=tobool local IsValid=IsValid local ColorAlpha=ColorAlpha local derma=derma local tostring=tostring local m=vgui.Register local ScrW=ScrW local ScrH=ScrH local n=ix.util.GetMaterial('purp/stalker/ui/ui_actor_options_background.png')local o=ix.util.GetMaterial('purp/stalker/ui/ui_actor_multiplayer_game_menu.png')local p=ix.util.GetMaterial('purp/stalker/ui/ui_actor_hint_wnd.png')local q=ix.util.GetMaterial('purp/stalker/ui/video_window')local r=ix.util.GetMaterial("purp/stalker/ui/ui_actor_widescreen_sidepanels.png")local s=ix.util.GetMaterial("pp/blurscreen")local t=ix.util.GetMaterial("purp/stalker/ui/mainmenu/background_settings.png")local u=ix.util.GetMaterial("purp/stalker/ui/mainmenu/options_logo.png")local v=ix.util.GetMaterial("purp/stalker/ui/mainmenu/menu_line.png")local w=ix.util.GetMaterial("purp/stalker/ui/mainmenu/button_exit.png")local x=ix.util.GetMaterial("purp/stalker/ui/mainmenu/options/background_left.png")local y=ix.util.GetMaterial("purp/stalker/ui/mainmenu/options/background_right.png")local z=ix.util.GetMaterial("purp/stalker/ui/mainmenu/arrow_left.png")local A,B,C=Color(57,61,63),Color(82,85,90),Color(87,86,87)local D={}function D:Init()local F=self:GetParent()local G=F:GetDockPadding()local H,I=F.multiplyWidth,F.multiplyHeight local J,K=ScrW(),ScrH()local M,N=J/1920,K/1080 self:SetPos(H*395+G,I*170)self:SetSize(H*587,I*562)self:MakePopup()self.buttonsPanel=self:Add("EditablePanel")self.buttonsPanel:SetPos(0,I*20)self.buttonsPanel:SetSize(H*575,I*52)self.buttonsPanel.Paint=function(U,V,W)for X=1,2 do a(p)b(X==1 and color_black or color_white)surface.DrawPartialTexturedRect(0,0,V,W,8,763,473,52,1024,1024)end end self.bodyPanel=self:Add("EditablePanel")self.bodyPanel:SetPos(H*10,I*65)self.bodyPanel:SetSize(H*565,I*400)local O=self:Add("DButton")O:SetFont("ui.Tahoma-s7")O:SetText("Настройки GMOD")O:SizeToContents()local P,Q=O:GetSize()P,Q=P+(H*20),Q+(I*10)O:SetSize(P,Q)O:SetPos((H*575)-P,I*478)O.Paint=function(U,V,W)local X=U:IsHovered()a(o)b(color_white)surface.DrawPartialTexturedRect(0,0,V,W,X and 429 or 319,562,108,24,1024,1024)end O.DoClick=function(U)c()RunConsoleCommand('gamemenucommand','OpenOptionsDialog')LocalPlayer():EmitSound("Helix.Press")end local R=self:Add("DButton")R:SetFont("ui.Tahoma-s7")R:SetText("Применить")R:SizeToContents()local S,T=R:GetSize()S,T=S+(H*40),T+(I*4)R:SetSize(S,T)R:SetPos((H*520)-S,I*555-T)R.Paint=function(U,V,W)local X=U:IsHovered()a(p)b(color_white)surface.DrawPartialTexturedRect(0,0,V,W,X and 236 or 97,X and 618 or 542,127,28,1024,1024)end R.DoClick=function(U)d()self:GetParent():Remove()LocalPlayer():EmitSound("Helix.Press")end self:InitButtons(H,I)end function D:InitButtons(F,G)self.cmanagerButton=self.buttonsPanel:Add("ixMenuButton")self.cmanagerButton:SetFont("ui.Tahoma-7")self.cmanagerButton:SetText("Управление")self.cmanagerButton:SetContentAlignment(5)self.cmanagerButton:SizeToContents()self.cmanagerButton:SetSize(F*155,G*23)self.cmanagerButton:SetPos(F*413,G*12)self.cmanagerButton.Paint=function(H,I,J)if H:IsHovered()then a(p)b(color_white)surface.DrawPartialTexturedRect(0,0,I,J,145,844,129,25,1024,1024)end end self.cmanagerButton.DoClick=function(H)self:InitCManager()end self.helixOptions=self.buttonsPanel:Add("ixMenuButton")self.helixOptions:SetFont("ui.Tahoma-7")self.helixOptions:SetText("Игра")self.helixOptions:SetContentAlignment(5)self.helixOptions:SizeToContents()self.helixOptions:SetSize(F*155,G*23)self.helixOptions:SetPos(F*282,G*12)self.helixOptions.Paint=function(H,I,J)if H:IsHovered()then a(p)b(color_white)surface.DrawPartialTexturedRect(0,0,I,J,6,844,131,25,1024,1024)end end self.helixOptions.DoClick=function(H)self:InitHelixOptions()end self:InitHelixOptions()end function D:InitCManager()local F=self.bodyPanel F:Clear()F.title_label=F:Add("DLabel")F.title_label:Dock(TOP)F.title_label:DockMargin(0,0,0,5)F.title_label:SetFont("ui.Tahoma-s7")F.title_label:SetText("Настройка клавиатуры")F.title_label:SetTextInset(10,0)F.title_label.Paint=function(N,O,P)a(o)b(color_white)surface.DrawPartialTexturedRect(0,0,O,P,0,504,535,22,1024,1024)end F.panel=F:Add("DPanel")F.panel:Dock(TOP)F.panel.Paint=function(N,O,P)a(o)b(color_white)surface.DrawPartialTexturedRect(0,0,O,P,0,731,446,20,1024,1024)ix.util.DrawText("Действие",10,P*0.5,color_white,TEXT_ALIGN_LEFT,TEXT_ALIGN_CENTER,"ui.Tahoma-s6",255)ix.util.DrawText("Кнопка",O-10,P*0.5,color_white,TEXT_ALIGN_RIGHT,TEXT_ALIGN_CENTER,"ui.Tahoma-s6",255)end local G=F:Add("DPanel")G:Dock(BOTTOM)G:SetPaintBackground(false)local H=G:Add("ixMenuButton")H:SetText("По умолчанию")H:SetFont("ui.Tahoma-s7")H:SetContentAlignment(5)H:SizeToContents()H:SetSize(H:GetWide()-40,e("ui.Tahoma-7")*1.75)G:SetTall(H:GetTall())H.Paint=function(N,O,P)a(o)b(color_white)surface.DrawPartialTexturedRect(0,0,O,P,N:IsHovered()and 429 or 319,562,108,24,1024,1024)end H.DoClick=function(N)ix.controlManager.ResetBinds()self:InitCManager()end F.cmanager=F:Add("EditablePanel")F.cmanager:Dock(FILL)local I=F.cmanager:Add("DScrollPanel")I:Dock(FILL)local J=I:GetVBar()J:DockMargin(10,0,0,0)J.Paint=function(N,O,P)draw.OutlinedBox(0,0,O,P,A,B,1)end J.btnUp.Paint=function(N,O,P)draw.RoundedBox(0,3,3,O-6,P-6,C)end J.btnGrip.Paint=function(N,O,P)draw.RoundedBox(0,3,3,O-6,P-6,C)end J.btnDown.Paint=function(N,O,P)draw.RoundedBox(0,3,3,O-6,P-6,C)end J:SetWide(self:GetParent().multiplyWidth*16)local K=ix.controlManager._defaultBinds local M=ix.controlManager.GetBinds()for N,O in SortedPairs(K)do local P=ix.controlManager._defaultBinds[N]if P==nil then continue end local Q=I:Add("EditablePanel")Q:Dock(TOP)Q:SetTall(e("ui.Tahoma-s6")+10)Q:DockMargin(0,5,0,5)Q.Paint=function(U,V,W)b(Color(40,40,40,100))f(0,0,V,W)end local R=P.bindDesc local S=Q:Add("DLabel")S:Dock(FILL)S:SetFont("ui.Tahoma-s6")S:SetText(R)S:SetTextInset(5,0)local T=M[N]if T then self.binder=Q:Add("control-manager.binder")self.binder:Dock(RIGHT)self.binder:SetSelectedNumber(T,N)self.binder.OnChange=function(U,V)ix.controlManager.ChangeControl(N,V)end self.binder.Paint=function(U,V,W)local X=U:IsHovered()a(p)b(color_white)surface.DrawPartialTexturedRect(0,0,V,W,X and 236 or 97,X and 618 or 542,127,28,1024,1024)end end end end function D:InitHelixOptions()end function D:Paint(F,G)b(color_white)a(p)surface.DrawPartialTexturedRect(0,0,F,G,508,462,487,462,1024,1024)end m("stalker.options.framePanel",D,"EditablePanel")local E={}function E:Init()local F,G=ScrW(),ScrH()local H,I=F/1920,G/1080 self:SetSize(F,G)self:MakePopup()ix.gui.optionsPanel=self self.sideRight=self:Add("EditablePanel")self.sideRight:SetSize(H*1300,G)self.sideRight:SetPos(F-H*1299,0)self.sideRight.Paint=function(P,Q,R)surface.SetMaterial(s)surface.SetDrawColor(255,255,255,alpha or 255)local S,T=P:LocalToScreen(0,0)for U=-(passes or 0.2),1,0.2 do s:SetFloat("$blur",U*5)s:Recompute()render.UpdateScreenEffectTexture()surface.DrawTexturedRect(S*-1,T*-1,F,G)end draw.RoundedBox(0,0,0,Q,R,Color(40,40,40,gui.IsGameUIVisible()and 255 or 200))end self.sideRight.PaintOver=function(P,Q,R)b(color_white)a(y)surface.DrawTexturedRect(0,0,Q,R)end self.sideLeft=self:Add("EditablePanel")self.sideLeft:SetSize(H*660,G)self.sideLeft:SetPos(0,0)self.sideLeft.Paint=function(P,Q,R)b(color_white)a(x)surface.DrawTexturedRect(0,0,Q,R)end local J=self.sideLeft:Add("EditablePanel")J:SetSize(H*620,I*245)J:SetPos(H*1,I*35)J.Paint=function(P,Q,R)local S,T=H*194,I*178 a(u)b(color_white)surface.DrawTexturedRect(Q*.5-S*.5,R*.5-T*.5,S,T)end self.listButtons=self.sideLeft:Add("DScrollPanel")self.listButtons:SetPos(H*1,I*280)self.listButtons:SetSize(H*620,I*500)self.listButtons:GetVBar():SetWide(0)self.listButtons:GetVBar():SetVisible(false)self.listButtons.Paint=function(P,Q,R)end local K=self:CreateButton(self.listButtons,"Игра")K.DoClick=function(P)self:InitHelixOptions()end local M=self:CreateButton(self.listButtons,"Управление")M.DoClick=function(P)self:InitControlOptions()end if CAMI.PlayerHasAccess(LocalPlayer(),"Helix - Manage Config",nil)then local P=self:CreateButton(self.listButtons,"IxMenu")P.DoClick=function(Q)vgui.Create("ixMenu")end end local N=self.sideLeft:Add("DButton")N:SetSize(H*364,I*103)N:SetPos(H*130,I*810)N:SetFont("ui.Tahoma-12")N:SetText(L("Настройки GMOD"))N:SetContentAlignment(5)N:SetTextColor(Color(157,157,157))N.OnCursorEntered=function(P)hoveredTime=CurTime()P:SetTextColor(color_white)end N.OnCursorExited=function(P)P:SetTextColor(Color(157,157,157))end N.Paint=function(P,Q,R)if P:IsHovered()then local alpha=Lerp((CurTime()-hoveredTime)*5,0,255)b(Color(255,255,255,alpha))a(w)surface.DrawTexturedRect(0,0,Q,R)end end N.DoClick=function(P)c()RunConsoleCommand('gamemenucommand','OpenOptionsDialog')LocalPlayer():EmitSound("Helix.Press")end local O=self.sideLeft:Add("DButton")O:SetSize(H*364,I*103)O:SetPos(H*130,I*930)O:SetFont("ui.Tahoma-17")O:SetText(L("Применить"))O:SetContentAlignment(5)O:SetTextColor(Color(157,157,157))O.OnCursorEntered=function(P)hoveredTime=CurTime()P:SetTextColor(color_white)end O.OnCursorExited=function(P)P:SetTextColor(Color(157,157,157))end O.Paint=function(P,Q,R)if P:IsHovered()then local alpha=Lerp((CurTime()-hoveredTime)*5,0,255)b(Color(255,255,255,alpha))a(w)surface.DrawTexturedRect(0,0,Q,R)end end O.DoClick=function(P)gui.HideGameUI()self:Remove()if not LocalPlayer():GetCharacter()then ix.gui.characterMenu=vgui.Create("ixCharMenu")end end self:InitHelixOptions()end function E:InitControlOptions()local F,G=ScrW(),ScrH()local H,I=F/1920,G/1080 self.sideRight:Clear()local J=self.sideRight:Add("DScrollPanel")J:Dock(FILL)local K=J:GetVBar()if K and IsValid(K)then K:DockMargin(10,0,0,0)K.Paint=function(Q,R,S)draw.RoundedBox(0,0,0,R,S,Color(50,50,50))end K.btnUp.Paint=function(Q,R,S)draw.RoundedBox(0,0,0,R,S,Color(75,75,75))b(color_white)a(z)local T,U=R*.3,S*.4 surface.DrawTexturedRectRotated(R*.5,S*.5,T,U,90)end K.btnGrip.Paint=function(Q,R,S)draw.RoundedBox(0,H*10,I*10,R-H*20,S-I*20,Color(100,100,105))end K.btnDown.Paint=function(Q,R,S)draw.RoundedBox(0,0,0,R,S,Color(75,75,75))b(color_white)a(z)local T,U=R*.3,S*.4 surface.DrawTexturedRectRotated(R*.5,S*.5,T,U,-90)end K:SetWide(H*45)end local M=J:Add("DLabel")M:Dock(TOP)M:DockMargin(0,0,0,5)M:SetFont("ui.Tahoma-s12")M:SetText("Настройка клавиатуры")M:SetTextInset(H*50,0)M:SetTall(I*50)M.Paint=function(Q,R,S)b(Color(100,100,100))surface.DrawRect(0,0,R,S)b(Color(15,52,44))surface.DrawRect(0,1,R,S-2)end local N=J:Add("DPanel")N:Dock(TOP)N:SetTall(I*50)N.Paint=function(Q,R,S)ix.util.DrawText("Действие",H*50,S*0.5,color_white,TEXT_ALIGN_LEFT,TEXT_ALIGN_CENTER,"ui.Tahoma-s12",255)ix.util.DrawText("Кнопка",R-H*125,S*0.5,color_white,TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER,"ui.Tahoma-s12",255)surface.SetDrawColor(Color(200,200,200,100))surface.DrawLine(0,S-1,R,S-1)end local O=ix.controlManager._defaultBinds local P=ix.controlManager.GetBinds()for Q,R in SortedPairs(O)do local S=ix.controlManager._defaultBinds[Q]if S==nil then continue end local T=J:Add("EditablePanel")T:Dock(TOP)T:SetTall(I*50)T:DockMargin(0,0,H*5,I*5)T.Paint=function(X,Y,Z)surface.SetDrawColor(Color(200,200,200,100))surface.DrawLine(0,Z-1,Y,Z-1)end local U=S.bindDesc local V=T:Add("DLabel")V:Dock(FILL)V:SetFont("ui.Tahoma-s12")V:SetText(U)V:SetTextInset(H*50,0)local W=P[Q]if W then self.binder=T:Add("control-manager.binder")self.binder:Dock(RIGHT)self.binder:SetSelectedNumber(W,Q)self.binder:SetFont("ui.Tahoma-s12")self.binder:SetWide(H*250)self.binder.OnChange=function(X,Y)ix.controlManager.ChangeControl(Q,Y)end self.binder.Paint=function(X,Y,Z)local ab=X:IsHovered()if ab then a(w)b(color_white)surface.DrawTexturedRect(0,0,Y,Z-I*5)end end end end end function E:InitHelixOptions()local F,G=ScrW(),ScrH()local H,I=F/1920,G/1080 self.sideRight:Clear()local J=self.sideRight:Add("ixSettings")local K=J.canvas local M=K:GetVBar()if M and IsValid(M)then M:DockMargin(10,0,0,0)M.Paint=function(O,P,Q)draw.RoundedBox(0,0,0,P,Q,Color(50,50,50))end M.btnUp.Paint=function(O,P,Q)draw.RoundedBox(0,0,0,P,Q,Color(75,75,75))b(color_white)a(z)local R,S=P*.3,Q*.4 surface.DrawTexturedRectRotated(P*.5,Q*.5,R,S,90)end M.btnGrip.Paint=function(O,P,Q)draw.RoundedBox(0,H*10,I*10,P-H*20,Q-I*20,Color(100,100,105))end M.btnDown.Paint=function(O,P,Q)draw.RoundedBox(0,0,0,P,Q,Color(75,75,75))b(color_white)a(z)local R,S=P*.3,Q*.4 surface.DrawTexturedRectRotated(P*.5,Q*.5,R,S,-90)end M:SetWide(H*45)end local N=ix.option.GetAllByCategories(true)for O,P in SortedPairs(N)do local Q=L(O)local R=J:AddCategory(Q)if not R then continue end R:DockMargin(0,0,0,10)R:SetTall(I*50)R.Paint=function(S,T,U)g("ui.Tahoma-s12")local V=S.text local W=select(2,h(V))+4 b(Color(100,100,100))surface.DrawRect(0,0,T,U)b(Color(15,52,44))surface.DrawRect(0,1,T,U-2)i(color_white)j(H*50,(U*.5-W*.5)+I*2)k(V)end l(P,function(S,T)return L(S.phrase)<L(T.phrase)end)for S,T in pairs(P)do if T.key=="language"then continue end if T.key=="escCloseMenu"then continue end local U=T.key local V=J:AddRow(T.type,R)local W=ix.util.SanitizeType(T.type,ix.option.Get(U))V:SetText(L(T.phrase))V.text:SetFont("ui.Tahoma-s10")V.text:DockMargin(H*50,0,0,0)V:Populate(U,T)V:SetTall(I*50)V.Paint=function(X,Y,Z)surface.SetDrawColor(Color(200,200,200,100))surface.DrawLine(0,Z-1,Y,Z-1)end V.SetShowReset=function(X,Y,Z,ab)Y=tobool(Y)if(Y and!IsValid(X.reset))then X.reset=X:Add("DButton")X.reset:SetFont("ixSmallTitleIcons")X.reset:SetText("x")X.reset:SetTextColor(ColorAlpha(derma.GetColor("Warning",X),100))X.reset:SizeToContents()X.reset.Paint=nil X.reset.DoClick=function()X:OnResetClicked()end X.reset:SetHelixTooltip(function(eb)local fb=eb:AddRow("title")fb:SetImportant()fb:SetText(L("resetDefault"))fb:SetBackgroundColor(derma.GetColor("Warning",X))fb:SizeToContents()local gb=eb:AddRow("description")gb:SetText(L("resetDefaultDescription",tostring(Z),tostring(ab)))gb:SizeToContents()eb:SetMousePadding(32)end)g(V.text:GetFont())local bb=V.text:GetText()local cb,db=h(bb)X.reset:SetPos(cb+X.reset:GetWide()*2,0)elseif(!Y and IsValid(X.reset))then X.reset:Remove()end X.bShowReset=Y end if(T.type==ix.type.number)then V:SetMin(T.min or 0)V:SetMax(T.max or 10)V:SetDecimals(T.decimals or 0)end V:SetValue(W,true)V:SetShowReset(W!=T.default,U,T.default)V.OnValueChanged=function()local X=V:GetValue()V:SetShowReset(X!=T.default,U,T.default)ix.option.Set(U,X)end V.OnResetClicked=function()V:SetShowReset(false)V:SetValue(T.default,true)ix.option.Set(U,T.default)end V:GetLabel():SetHelixTooltip(function(X)X:SetMousePadding(64)local Y=X:AddRow("description")Y:SetText(L(T.description))Y:SizeToContents()end)if V:GetName()=="ixSettingsRowNumber"then V.setting:GetLabel().OnMousePressed=function()end V.setting.slider.Paint=function(X,Y,Z)a(p)b(color_white)surface.DrawPartialTexturedRect(0,Z*0.5-8,Y,16,33,739,249,16,1024,1024)a(p)b(color_white)surface.DrawPartialTexturedRect(X:GetVisualFraction()*(Y-21),Z*0.5-8,21,16,296,739,21,16,1024,1024)end elseif V:GetName()=="ixSettingsRowBool"then V.setting.Paint=function(X,Y,Z)local ab=tobool(X.bChecked)a(o)b(color_white)surface.DrawPartialTexturedRect(Y*0.5-15,Z*0.5-15,30,30,839,ab and 188 or 219,30,30,1024,1024)end end end end self.sideRight.panel=J end function E:CreateButton(F,G)local H,I=ScrW(),ScrH()local J,K=H/1920,I/1080 local M=F:Add("DButton")M:Dock(TOP)M:DockMargin(0,0,0,-K*6)M:SetTall(K*94)M:SetFont("ui.Tahoma-17")M:SetText(L(G))M:SetContentAlignment(5)M:SetTextInset(J*80,K*5)M:SetTextColor(Color(157,157,157))M.OnCursorEntered=function(N)hoveredTime=CurTime()N:SetTextColor(color_white)end M.OnCursorExited=function(N)N:SetTextColor(Color(157,157,157))end M.Paint=function(N,O,P)if N:IsHovered()then local alpha=Lerp((CurTime()-hoveredTime)*5,0,255)b(Color(255,255,255,alpha))a(v)surface.DrawTexturedRect(-O*.05,0,O,P)end end return M end function E:Paint(F,G)end m("stalker.options.mainFrame",E,"EditablePanel")if IsValid(ix.gui.optionsPanel)then ix.gui.optionsPanel:Remove()ix.gui.optionsPanel=vgui.Create("stalker.options.mainFrame")end