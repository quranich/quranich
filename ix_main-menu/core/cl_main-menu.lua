-- <|> Hello, fucker | Taxin2012 and PURP was here | Mysterious Zone Project | mzrp.ru <|>
local LocalPlayer=LocalPlayer local a=input.IsKeyDown local b=gui.IsGameUIVisible local IsValid=IsValid local pairs=pairs local ispanel=ispanel local c=vgui.Create local d=gui.MousePos local ScrW=ScrW local ScrH=ScrH local Angle=Angle local e=ix.plugin.list["main-menu"]local f={["bars"]=true,["chat"]=true,["stalkerInventory"]=true}local g=ix.util.GetMaterial("purp/stalker/ui/mainmenu/backgrounds/charselect/agroprom.png")local h=ix.util.GetMaterial("purp/stalker/ui/mainmenu/backgrounds/charselect/agroprom_back")local i=ix.util.GetMaterial("purp/stalker/ui/mainmenu/backgrounds/charselect/cordon.png")local j=ix.util.GetMaterial("purp/stalker/ui/mainmenu/backgrounds/charselect/cordon_back")local k=ix.util.GetMaterial("purp/stalker/ui/mainmenu/backgrounds/charselect/darkvalley.png")local l=ix.util.GetMaterial("purp/stalker/ui/mainmenu/backgrounds/charselect/darkvalley_fire")local m=ix.util.GetMaterial("purp/stalker/ui/mainmenu/backgrounds/charselect/garbage.png")local n=ix.util.GetMaterial("purp/stalker/ui/mainmenu/backgrounds/charselect/garbage_back")local o=ix.util.GetMaterial("purp/stalker/ui/mainmenu/backgrounds/charselect/graveyard.png")local p=ix.util.GetMaterial("purp/stalker/ui/mainmenu/backgrounds/charselect/graveyard_fire")local q=ix.util.GetMaterial("purp/stalker/ui/mainmenu/backgrounds/charselect/military.png")local r=ix.util.GetMaterial("purp/stalker/ui/mainmenu/backgrounds/charselect/military_back")local s=ix.util.GetMaterial("purp/stalker/ui/mainmenu/backgrounds/charselect/rostok.png")local t=ix.util.GetMaterial("purp/stalker/ui/mainmenu/backgrounds/charselect/rostok_tv")local u=ix.util.GetMaterial("purp/stalker/ui/mainmenu/backgrounds/charselect/swamps.png")local v=ix.util.GetMaterial("purp/stalker/ui/mainmenu/backgrounds/charselect/swamps_back")local w=ix.util.GetMaterial("purp/stalker/ui/mainmenu/backgrounds/charselect/wildterritory.png")local x=ix.util.GetMaterial("purp/stalker/ui/mainmenu/backgrounds/charselect/wildterritory_generator")local y=ix.util.GetMaterial("purp/stalker/ui/mainmenu/backgrounds/charselect/yantar.png")local z=ix.util.GetMaterial("purp/stalker/ui/mainmenu/backgrounds/charselect/yantar_rat")local A={["gm_construct"]={z,y,{[BOX_FRONT]=Color(155,100,50),[BOX_BACK]=Color(205,150,100),[BOX_RIGHT]=Color(205,150,100),[BOX_LEFT]=Color(205,150,100),[BOX_TOP]=Color(250,200,200),[BOX_BOTTOM]=Color(50,50,50),},{x=1409,y=82,w=512,h=512}},["mz_d_yantar"]={z,y,{[BOX_FRONT]=Color(155,100,50),[BOX_BACK]=Color(205,150,100),[BOX_RIGHT]=Color(205,150,100),[BOX_LEFT]=Color(205,150,100),[BOX_TOP]=Color(250,200,200),[BOX_BOTTOM]=Color(50,50,50),},{x=1409,y=82,w=512,h=512}},["mz_d_wildarea"]={x,w,{[BOX_FRONT]=Color(100,100,100),[BOX_BACK]=Color(50,50,50),[BOX_RIGHT]=Color(100,100,150),[BOX_LEFT]=Color(100,120,100),[BOX_TOP]=Color(50,50,50),[BOX_BOTTOM]=Color(150,150,150),},{x=638,y=425,w=512,h=256}},["mz_d_bar"]={t,s,{[BOX_FRONT]=Color(155,100,50),[BOX_BACK]=Color(205,150,100),[BOX_RIGHT]=Color(205,150,100),[BOX_LEFT]=Color(205,150,100),[BOX_TOP]=Color(250,180,150),[BOX_BOTTOM]=Color(50,50,50),},{x=1608,y=374,w=256,h=256}},["mz_d_millitary"]={r,q,{[BOX_FRONT]=Color(100,100,100),[BOX_BACK]=Color(50,50,50),[BOX_RIGHT]=Color(100,100,100),[BOX_LEFT]=Color(100,100,100),[BOX_TOP]=Color(100,100,100),[BOX_BOTTOM]=Color(50,50,50),},{x=536,y=0,w=1024,h=1024}},["mz_d_marsh"]={v,u,{[BOX_FRONT]=Color(150,150,150),[BOX_BACK]=Color(150,150,150),[BOX_RIGHT]=Color(150,150,150),[BOX_LEFT]=Color(200,200,200),[BOX_TOP]=Color(150,150,150),[BOX_BOTTOM]=Color(50,50,50),},{x=0,y=0,w=2048,h=1024}},["mz_d_cementry"]={p,o,{[BOX_FRONT]=Color(100,100,100),[BOX_BACK]=Color(120,120,120),[BOX_RIGHT]=Color(120,100,100),[BOX_LEFT]=Color(100,100,100),[BOX_TOP]=Color(200,200,200),[BOX_BOTTOM]=Color(100,100,100),},{x=1267,y=363,w=256,h=256}},["mz_d_garbage"]={n,m,{[BOX_FRONT]=Color(120,120,120),[BOX_BACK]=Color(120,120,120),[BOX_RIGHT]=Color(50,50,50),[BOX_LEFT]=Color(50,50,50),[BOX_TOP]=Color(200,200,200),[BOX_BOTTOM]=Color(0,0,0),},{x=1025,y=245,w=512,h=256}},["mz_d_dolinadark"]={l,k,{[BOX_FRONT]=Color(200,200,200),[BOX_BACK]=Color(50,50,50),[BOX_RIGHT]=Color(50,50,50),[BOX_LEFT]=Color(200,200,200),[BOX_TOP]=Color(200,200,200),[BOX_BOTTOM]=Color(50,50,50),},{x=1632,y=218,w=256,h=256}},["mz_d_cordon"]={j,i,{[BOX_FRONT]=Color(150,110,65),[BOX_BACK]=Color(200,160,115),[BOX_RIGHT]=Color(50,50,50),[BOX_LEFT]=Color(200,160,115),[BOX_TOP]=Color(200,160,115),[BOX_BOTTOM]=Color(50,50,50),},{x=980,y=193,w=256,h=256}},["mz_d_agroprom"]={h,g,{[BOX_FRONT]=Color(50,50,50),[BOX_BACK]=color_white,[BOX_RIGHT]=Color(50,50,50),[BOX_LEFT]=color_white,[BOX_TOP]=color_white,[BOX_BOTTOM]=Color(50,50,50),},{x=327,y=0,w=1024,h=512}},["mz_n_cordon"]={j,i,{[BOX_FRONT]=Color(150,110,65),[BOX_BACK]=Color(200,160,115),[BOX_RIGHT]=Color(50,50,50),[BOX_LEFT]=Color(200,160,115),[BOX_TOP]=Color(200,160,115),[BOX_BOTTOM]=Color(50,50,50),},{x=980,y=193,w=256,h=256}},["mz_n_agroprom"]={h,g,{[BOX_FRONT]=Color(50,50,50),[BOX_BACK]=color_white,[BOX_RIGHT]=Color(50,50,50),[BOX_LEFT]=color_white,[BOX_TOP]=color_white,[BOX_BOTTOM]=Color(50,50,50),},{x=327,y=0,w=1024,h=512}},["mz_n_garbage"]={n,m,{[BOX_FRONT]=Color(120,120,120),[BOX_BACK]=Color(120,120,120),[BOX_RIGHT]=Color(50,50,50),[BOX_LEFT]=Color(50,50,50),[BOX_TOP]=Color(200,200,200),[BOX_BOTTOM]=Color(0,0,0),},{x=1025,y=245,w=512,h=256}},["mz_n_dolinadark"]={l,k,{[BOX_FRONT]=Color(200,200,200),[BOX_BACK]=Color(50,50,50),[BOX_RIGHT]=Color(50,50,50),[BOX_LEFT]=Color(200,200,200),[BOX_TOP]=Color(200,200,200),[BOX_BOTTOM]=Color(50,50,50),},{x=1632,y=218,w=256,h=256}},["mz_n_wildarea"]={x,w,{[BOX_FRONT]=Color(100,100,100),[BOX_BACK]=Color(50,50,50),[BOX_RIGHT]=Color(100,100,150),[BOX_LEFT]=Color(100,120,100),[BOX_TOP]=Color(50,50,50),[BOX_BOTTOM]=Color(150,150,150),},{x=638,y=425,w=512,h=256}},["mz_n_cementry"]={p,o,{[BOX_FRONT]=Color(100,100,100),[BOX_BACK]=Color(120,120,120),[BOX_RIGHT]=Color(120,100,100),[BOX_LEFT]=Color(100,100,100),[BOX_TOP]=Color(200,200,200),[BOX_BOTTOM]=Color(100,100,100),},{x=1267,y=363,w=256,h=256}},["mz_n_bar"]={t,s,{[BOX_FRONT]=Color(155,100,50),[BOX_BACK]=Color(205,150,100),[BOX_RIGHT]=Color(205,150,100),[BOX_LEFT]=Color(205,150,100),[BOX_TOP]=Color(250,180,150),[BOX_BOTTOM]=Color(50,50,50),},{x=1608,y=374,w=256,h=256}},["mz_n_marsh"]={z,y,{[BOX_FRONT]=Color(155,100,50),[BOX_BACK]=Color(205,150,100),[BOX_RIGHT]=Color(205,150,100),[BOX_LEFT]=Color(205,150,100),[BOX_TOP]=Color(250,200,200),[BOX_BOTTOM]=Color(50,50,50),},{x=1409,y=82,w=512,h=512}},["mz_n_yantar"]={z,y,{[BOX_FRONT]=Color(155,100,50),[BOX_BACK]=Color(205,150,100),[BOX_RIGHT]=Color(205,150,100),[BOX_LEFT]=Color(205,150,100),[BOX_TOP]=Color(250,200,200),[BOX_BOTTOM]=Color(50,50,50),},{x=1409,y=82,w=512,h=512}},["mz_n_millitary"]={r,q,{[BOX_FRONT]=Color(100,100,100),[BOX_BACK]=Color(50,50,50),[BOX_RIGHT]=Color(100,100,100),[BOX_LEFT]=Color(100,100,100),[BOX_TOP]=Color(100,100,100),[BOX_BOTTOM]=Color(50,50,50),},{x=536,y=0,w=1024,h=1024}},}function e:GetMapBackground()local D=game.GetMap(true)return A[D]and A[D]or A["mz_d_marsh"]end hook.Add("OnPauseMenuShow",e.uniqueID.."OnPauseMenuShow",function()local D=ix.gui local E=false for I,J in next,D do if ispanel(J)and f[I]~=nil and IsValid(J)and(J.GetActive==nil or J:GetActive()==true)then if J.Close then J:Close()E=true elseif J.SetActive then J:SetActive(false)E=true end end end if E==true then return false end local F=LocalPlayer()local G=F:GetCharacter()local H=ix.gui.characterMenu if IsValid(H)==false or(IsValid(H)and H:IsClosing())then ix.gui.characterMenu=vgui.Create("ixCharMenu")if ix.gui.characterMenu.InitESC then ix.gui.characterMenu:InitESC()end else ix.gui.characterMenu:Close(true)end return false end)hook.Add("LoadIntro",e.uniqueID.."LoadIntro",function()timer.Simple(1,function()local D=ix.gui.intro if IsValid(D)then D.BeginAnimation=function()end D:Remove()end end)end)ix.lang.AddTable("russian",{optMulticoreRender="Многоядерный рендеринг",optdMulticoreRender="Помните, что многоядерный рендеринг все еще может содержать некоторые ошибки, сбои и другие проблемы при включении! Если у вас возникнут какие-либо проблемы, попробуйте повторно отключить его и снова поиграть с выключенным \nПри включении положительно влияет на FPS (в случае многоядерного процессора)",optDetailDist="Дистанция прорисовки травы",optdDetailDist="Дистанция отрисовки травы (меньшее значение имеет прирост FPS)",optdWinter_Snowfall="Включение/Отключения частиц снега \n(при отключении имеет незначительный прирост FPS)",optdBreathSteam="Включение/Отключения пара от дыхания персонажа и других игроков \n(при отключении имеет незначительный прирост FPS)",optdShowCompass="Включение/Отключения компаса \n(при отключении имеет незначительный прирост FPS)",optdMusicRadioEnabled="Включение/Отключения музыки в радио",optdRaisedStatus="Включение/Отключения музыки в радио",optdRaisedStatus="Включение/Отключения музыки в радио",optMZ_arc9_toggleads="Прицеливание по нажатию",optMZ_arc9_fx_rtvm="Оружие в RT прицелах",optMZ_arc9_muzzle_others="Эффекты выстрелов от игроков",optMZ_arc9_compensate_sens="Компенсирование чувствительности в прицеле",})ix.option.Add("multicoreRender",ix.type.bool,true,{category="performance",OnChanged=function(D,E)local F=E and"1"or"0"RunConsoleCommand("gmod_mcore_test",F)RunConsoleCommand("mat_queue_mode",E and"2"or"-1")RunConsoleCommand("cl_threaded_bone_setup",F)end})ix.option.Add("detailDist",ix.type.number,500,{category="performance",min=0,max=1000,OnChanged=function(D,E)RunConsoleCommand("cl_detaildist",E)end,})local B={"arc9_toggleads","arc9_fx_rtvm","arc9_muzzle_others","arc9_compensate_sens",}for D,E in ipairs(B)do local F=GetConVar(E)local G=tobool(F:GetDefault())ix.option.Add("MZ_"..E,ix.type.bool,G,{category="Оружие",OnChanged=function(H,I)F:SetBool(I)end,})end hook.Add("InitPostEntity",e.uniqueID.."InitPostEntity",function()local D=LocalPlayer()if D and IsValid(D)then local E=ix.option.Get("multicoreRender",true)RunConsoleCommand("arc9_cheapscopes",0)local F=E and"1"or"0"RunConsoleCommand("gmod_mcore_test",F)RunConsoleCommand("mat_queue_mode",E and"2"or"-1")RunConsoleCommand("cl_threaded_bone_setup",F)local G=ix.option.Get("detailDist",500)if G then RunConsoleCommand("cl_detaildist",G)end end end)local C=ix.util.GetMaterial("purp/stalker/ui/mainmenu/cursor.png","smooth")hook.Add("PostRenderVGUI","PostRenderVGUI.Stalker-Cursor",function()local D=vgui.CursorVisible()if D then local E=vgui.GetHoveredPanel()if IsValid(E)and E.SetCursor then E:SetCursor("blank")if not LocalPlayer().hideStalkerCursor then local F,G=input.GetCursorPos()if F>0 or G>0 then surface.SetDrawColor(255,255,255,240)surface.SetMaterial(C)surface.DrawTexturedRect(F,G,52,52)end end end end end)