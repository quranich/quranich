-- <|> Hello, fucker | Taxin2012 and PURP was here | Mysterious Zone Project | mzrp.ru <|>
local Color=Color local a=hook.Add local LocalPlayer=LocalPlayer local ScrH=ScrH local ScrW=ScrW local b=draw.GetFontHeight local c=math.abs local d=math.sin local RealTime=RealTime local e=math.Round local CurTime=CurTime local f=string.format local g=ix.plugin.list["capture-system-core"]local h=g.uniqueID local i=Color(255,255,255,100)a("HUDPaint",h.."HUDPaint",function()local j=LocalPlayer()local k=ScrH()*.1 local l=ix.captureSystem.stored if l then for n,o in next,l do if o["core"]and o["core"]["area"]and o["core"]["area"].startPos and o["core"]["area"].endPos then if(j:GetPos()+j:OBBCenter()):WithinAABox(o["core"]["area"].startPos,o["core"]["area"].endPos)then ix.util.DrawText(o["core"].name,ScrW()*.5,k,i,TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER,"ui.Tahoma-9")k=k+b("ui.Tahoma-9")if o["core"].isCaptureProgress==true then local p=c(d(RealTime()*2)*150)ix.util.DrawText("ВЫ В ЗОНЕ ЗАХВАТА!",ScrW()*.5,k,Color(255,50,50,p),TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER,"ui.Tahoma-7")k=k+b("ui.Tahoma-9")local q=e((o["core"].captureProgress or CurTime())-CurTime())ix.util.DrawText("Осталось - "..q.." сек.",ScrW()*.5,k,Color(200,200,200,100),TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER,"ui.Tahoma-7")else local p="-"if o["core"].factionOwned and o["core"].factionOwned~="nil"then p=ix.faction.teams[o["core"].factionOwned].name end ix.util.DrawText("Контроль: "..p,ScrW()*.5,k,i,TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER,"ui.Tahoma-9")k=k+b("ui.Tahoma-9")local q=o["core"].deferredProgress if q and q>CurTime()then local r=e(q-CurTime())ix.util.DrawText("До начала захвата: "..r.." сек.",ScrW()*.5,k,i,TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER,"ui.Tahoma-9")k=k+b("ui.Tahoma-9")end end if(j._captureObjectsESPDelay or 0)>CurTime()then ix.util.DrawText("Подсветка объектов: "..e(j._captureObjectsESPDelay-CurTime()).." сек.",ScrW()*.5,k,i,TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER,"ui.Tahoma-7",alpha)k=k+b("ui.Tahoma-7")for p,q in next,j._captureObjectsESP or{}do local r=q.pos:ToScreen()ix.util.DrawText(q.name,r.x,r.y,i,TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER,"ui.Tahoma-7",alpha)ix.util.DrawText("Восстановление: "..(q.repair or 0).."%",r.x,r.y+b("ui.Tahoma-7"),i,TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER,"ui.Tahoma-6",alpha)end end break end end end end local m=j.captureMessage for n,o in next,m or{}do if o and o.delay>CurTime()then for p,q in next,o.message do local r=f(q,o.args[p])ix.util.DrawText(r,ScrW()*.5,k,color_white,TEXT_ALIGN_CENTER,TEXT_ALIGN_CENTER,"ui.Tahoma-9")k=k+b("ui.Tahoma-9")end else j.captureMessage[n]=nil end end end)