-- <|> Hello, fucker | Taxin2012 and PURP was here | Mysterious Zone Project | mzrp.ru <|>
local a=ix.plugin.list["inventory-module-aitems-list"]function ix.itemsList.casereward_listregistration(b,c)local d=b.name local e=string.format("Надеть %s",d)local f=string.format("Снять %s",d)b.functions.combine={OnRun=function(g,h)local i=ix.item.instances[h[1]]if i==nil then return false end local j=g.player local k=i:GetPlayerID()local l=i:GetCharacterID()local m=j:SteamID64()local n=j:GetCharacter():GetID()if(k and l and k==m and l!=n)then j:NotifyLocalized("itemOwned")return false end local o=g:GetUnlockData()if o[i.uniqueID]~=nil then local p=o[i.uniqueID]if p then local q=i:GetData("itemStack",1)if q<=1 then i:Remove()else i:SetData("itemStack",q-1)end end o[i.uniqueID]=nil g:SetUnlockData(o)end return false end,OnCanRun=function(g,h)local i=ix.item.instances[h[1]]local j=g:GetUnlockData()if j[i.uniqueID]~=nil then return true end return false end}b.functions.openCase={name="Открыть (получить содержимое)",OnRun=function(g)local h=g.player local i=h:GetCharacter()if not i then return false end local j=g:GetUnlockData()if table.IsEmpty(j)==false then h:Notify("Кейс закрыт необходимо его открыть!\n*Для открытия перетащите необходимые предметы на контейнер в инвентаре!")return false end g:Remove()local k=i:GetInventory()for l,m in next,g.rewardData do local n=ix.item.list[l]if not n then continue end local o,p=m.amount,m.chance if math_random(1,100)<=m.chance then local q=math_random(1,o or 1)if n.isStack==true then k:Add(l,1,{itemStack=q})else k:Add(l,q)end end end return false end,OnCanRun=function(g)local h=g.player local i=h:GetCharacter()local j=i:GetInventory()local k=j:GetID()local l=g.invID return not IsValid(g.entity)and IsValid(h)and l==k end}function b:GetUnlockData()return self:GetData("unlock",table.Copy(self.unlockData or{}))end function b:SetUnlockData(g)return self:SetData("unlock",g)end end if IX_PLUGINS_LOADED and ix.itemsList and ix.itemsList.CoreItemsRegistration then ix.itemsList.CoreItemsRegistration()end