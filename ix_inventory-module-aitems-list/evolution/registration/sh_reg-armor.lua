-- <|> Hello, fucker | Taxin2012 and PURP was here | Mysterious Zone Project | mzrp.ru <|>
local a=ix.plugin.list["inventory-module-aitems-list"]local b={["citizen"]="loners",["gp_003"]="neutrals",["gp_004"]="army",["gp_005"]="clearsky",["gp_006"]="scientists",["gp_007"]="freedom",["gp_008"]="duty",["gp_009"]="bandits",["gp_010"]="monolith",["gp_011"]="merc",["gp_012"]="dregs",["gp_018"]="reapers",}local function c(e,f,g,h,i)local j=e.helmetDisable==true local k=h:GetEquipmentHelmet()if k and k.actorsTier and k.actorsTier==99 then k:SetData("equipmentSlot")k:Transfer(i,nil,nil,g)return end if k~=nil and f==true then if j then k:SetData("equipmentSlot")k:Transfer(i,nil,nil,g)else k:ActionActors(true,g,h)end end end local function d(e,f,g,h,i)local j=e.actorsMaskBlackList or{}local k=h:GetEquipmentMask()if k~=nil then if j[k.uniqueID]then k:SetData("equipmentSlot")k:Transfer(i,nil,nil,g)else k:ActionActors(true,g,h)end end end function ix.itemsList.armor_listregistration(e,f)local g=e.name local h=string.format("Надеть %s",g)local i=string.format("Снять %s",g)e.hasDurability=true e.functions.Equip={name=h,icon="icon16/arrow_turn_left.png",OnRun=function(j)local k=j.player local l=k:GetCharacter()local m=l:GetEquipmentInventory()local n=m:GetID()j:Transfer(n,nil,nil,k)return false end,OnCanRun=function(j)local k=j.player local l=k:GetCharacter()local m,n,o=l:GetInventory(),l:GetEquipmentInventory()local p=m:GetID()local q=j:GetData("equipmentSlot")local r=j.entity return not IsValid(j.entity)and IsValid(k)and q==nil and p==j.invID and hook.Run("CanTransferItem",j,m,n)~=false end}e.functions.UnEquip={name=i,icon="icon16/arrow_turn_right.png",OnRun=function(j)local k=j.player local l=k:GetCharacter()local m=l:GetInventory()local n=m:GetID()j:Transfer(n,nil,nil,k)return false end,OnCanRun=function(j)local k=j.player local l=k:GetCharacter()local m,n=l:GetInventory(),l:GetEquipmentInventory()local o,p=m:GetID(),n:GetID()local q=j:GetData("equipmentSlot")return not IsValid(j.entity)and IsValid(k)and q~=nil and p==j.invID and hook.Run("CanTransferItem",j,n,m)~=false end}function e:OnEntityTakeDamage(j,k)return false end function e:ActionEquipment(j,k,l,m)local n,o=l:GetInventory(),l:GetEquipmentInventory()local p,q=n:GetID(),o:GetID()local r=l:GetFaction()local s=ix.faction.indices[r]local t=s.uniqueID local u=j and self.playerModel or l:GetData("oldModel")if j==true then local B=k:GetModel()l:SetData("oldModel",B)else local B=b[t]if B then u=string.Replace("models/mz/loners/loners_sweater_01.mdl","loners",B)u=util.IsValidModel(u)and u or"models/mz/loners/loners_sweater_01.mdl"else u="models/mz/loners/loners_sweater_01.mdl"end end l:SetModel(u)local v=j and self:GetData("renderSkin",0)or l:GetData("oldSkin")if j==true then local B=k:GetSkin()l:SetData("oldSkin",B)l:SetData("skin",v)end k:SetSkin(v)if j==true then local B=l:GetData("groups",{})if table.IsEmpty(B)==false then l:SetData("oldGroups",B)end end k:ResetBodygroups()local w=l:GetCharacterFace()local x=j and self:GetData("armor_bg",{})or l:GetData("oldGroups",{})if x then x[3]=w end for B,C in pairs(x)do k:SetBodygroup(B,C)end l:SetData("groups",x)d(self,j,k,l,p)c(self,j,k,l,p)if j==false then local B=l:GetEquipmentArtefacts()for E,F in next,B do F:SetData("equipmentSlot")F:Transfer(p,nil,nil,k)end local C=l:GetEquipmentBackpack()if C and(C.actorsTier==4 or C.actorsTier==6 or C.actorsTier>10)then C:SetData("equipmentSlot")C:Transfer(p,nil,nil,k)end local D=l:GetEquipmentModifier()if D then D:SetData("equipmentSlot")D:Transfer(p,nil,nil,k)end end if ix.durability then local B=self:GetDurability()if B<=0 then return end end if m==true then return end local y="wick_gesture_equip_armor"local z,A=k:LookupSequence(y)if z and z~=-1 then if CLIENT then k:SetupBones()end local B,C=k:GetActiveWeapon(),k:GetWeapon("ix_hands")if IsValid(C)then local E=C:GetClass()k:SelectWeapon(E)end k:DoAnimationEvent(z)k:SetNetVar("firstPersonCamera",true)k:SetNetVar("isEquipedItem",true)k:EmitSound("soundEquipArmor")k:SetWalkSpeed(ix.config.Get("walkSpeed")*.25)k:SetRunSpeed(ix.config.Get("walkSpeed")*.25)local D=(j and"Надеваю экипировку"or"Снимаю экипировку")k:SetAction(D,A*.45)timer.Simple(A*.45,function()if IsValid(k)then k:SetNetVar("firstPersonCamera")k:SetNetVar("isEquipedItem")local E=ix.config.Get("runSpeed")k:SetWalkSpeed(ix.config.Get("walkSpeed"))k:SetRunSpeed(E)k:DoAnimationEvent(-1)k:SetupHands()if IsValid(B)and B:GetClass()then k:SelectWeapon(B:GetClass())end end end)end end end if IX_PLUGINS_LOADED and ix.itemsList and ix.itemsList.CoreItemsRegistration then ix.itemsList.CoreItemsRegistration()end