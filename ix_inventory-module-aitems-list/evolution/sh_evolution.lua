-- <|> Hello, fucker | Taxin2012 and PURP was here | Mysterious Zone Project | mzrp.ru <|>
local a=ix.plugin.list["inventory-module-aitems-list"]ix.itemsListMaterials={["ui_icon_equipment"]=ix.util.GetMaterial("purp/stalker/items/ui_icon_cop.png"),["ui_icon_equipment_anomaly"]=ix.util.GetMaterial("purp/stalker/items/ui_icon_equipment_anomaly.png"),["ui_icon_equipment_soc"]=ix.util.GetMaterial("purp/stalker/items/ui_icon_equipment_soc.png"),["ui_icon_equipment_misc_01"]=ix.util.GetMaterial("purp/stalker/items/ui_icon_equipment-misc_01.png"),["ui_icon_equipment_misc_02"]=ix.util.GetMaterial("purp/stalker/items/ui_icon_equipment-misc_02.png"),["ui_icon_equipment_misc_03"]=ix.util.GetMaterial("purp/stalker/items/ui_icon_equipment-misc_03.png"),["wick_icon_equipment_seva"]=ix.util.GetMaterial("purp/stalker/items/wick_icon_equipment_seva.png"),["ui_icon_equipmentfin"]=ix.util.GetMaterial("purp/stalker/items/ui_icon_equipmentfin.png"),["ui_icon_pda_mz"]=ix.util.GetMaterial("png/icons/ui_icon_pda_mz.png","smooth"),["ui_icon_armorlist_mz"]=ix.util.GetMaterial("png/icons/ui_icon_armorlist_mz.png","smooth"),["ui_icon_mz_gunpack"]=ix.util.GetMaterial("png/mz/weapons/icons/ui_icon_mz_gunpack.png","smooth"),["ui_icon_mz_items"]=ix.util.GetMaterial("materials/png/icons/ui_icon_itemlist_mz.png","smooth"),}ix.weaponStatsIcons={["RECOIL"]={"Отдача",673,642},}ix.protectStatsIcons={[DMG_BURN]={"Термозащита",787,623},[DMG_SHOCK]={"Электрозащита",749,699},[DMG_ACID]={"Химзащита",787,604},[DMG_RADIATION]={"Радиозащита",768,642},[DMG_CLUB]={"Пси-защита",787,585},[DMG_DIRECT]={"Защита от газа",787,604},[DMG_GENERIC]={"Гашение удара",806,718},[DMG_BULLET]={"Броня",749,585},["WEIGHT"]={"Максимальный вес",768,623},["ARTCONT"]={"Арт контейнер",768,699},["DELAY"]={"Время действия",825,433},["HEALTH"]={"Заживление ран",749,604},["RADIATION"]={"Радиозащита",768,490},}local function b(d,e,f,g)local h=e or d for i,j in next,h do if j.SubAttachments and table.IsEmpty(j.SubAttachments)==false then CalculateAttachments(d,j.SubAttachments,f,g)end local k=j.Installed local l=ARC9.GetAttTable(k)if l then for m,n in next,f do local o=m.."Add"o=m.."Mult"if l[o]then local p=g[m]or 1 f[m]=f[m]+(p*(l[o]-1))end end end end end local function CalculateAttachments(d,e,f,g)local h=e or d for i,j in next,h do if j.SubAttachments and table.IsEmpty(j.SubAttachments)==false then CalculateAttachments(d,j.SubAttachments,f,g)end local k=j.Installed local l=ARC9.GetAttTable(k)if l then for m,n in next,f do local o=m.."Add"o=m.."Mult"if l[o]then local p=g[m]or 1 f[m]=f[m]+(p*(l[o]-1))end end end end end local function c(d,e,f)local g=d:GetData("upgrades",{})for h,i in next,g do for j,k in next,i do local l=ix.upgradeRepair:GetUpgradeTable(h,k)if l then local m=l.attachmentInstalled local n=l.weaponStats if n then for o,p in next,e do local q=o.."Add"q=o.."Mult"if n[q]then local r=f[o]or 1 e[o]=e[o]+(r*(n[q]-1))end end end end end end end ix.weaponStatsIconsARC9={["Damage"]={order=0,name="Убойность",negation=false,max=400,iconX=654,iconY=718,GetStat=function(d,e,f)local g=d.DamageMax local h=d.Num if h<=0 then return 0 end local i=d.DistributeDamage local j=d.NormalizeNumDamage if i then g=g/h elseif j then g=g/(h/d.Num)end local k=d.DamageMult or 1 local l={["Damage"]=0,}c(f,l,d)b(d.Attachments,d.Attachments,l,d)CalculateAttachments(e,e,l,d)k=k+l["Damage"]g=g*k g=math.Round(g,2)return tonumber(g)end,},["Range"]={order=1,name="Дальность",negation=false,max=100,iconX=692,iconY=661,GetStat=function(d,e,f)local g=d.RangeMax or 0 local h=d.RangeMin or 0 local i=d.Flatness or 0 local j=d.RangeMult or 1 local k={["Range"]=0,["Flatness"]=0}c(f,k,d)b(d.Attachments,d.Attachments,k,d)CalculateAttachments(e,e,k,d)i=i+k["Flatness"]j=j+k["Range"]g=g*i*j h=h*j return((g+h)*.5)*0.0254 end,},["Spread"]={order=2,name="Точность",negation=true,max=200,iconX=730,iconY=623,GetStat=function(d,e,f)local g=d.Spread or 1 local h={["Spread"]=0,}c(f,h,d)b(d.Attachments,d.Attachments,h,d)CalculateAttachments(e,e,h,d)g=g+h["Spread"]return 200-math.Round(g*360*60/10,1)end,},["Flatness"]={order=3,name="Настильность",negation=false,max=2,iconX=673,iconY=661,GetStat=function(d,e,f)local g=d.Flatness or 0 local h={["Flatness"]=0,}c(f,h,d)b(d.Attachments,d.Attachments,h,d)CalculateAttachments(e,e,h,d)g=g+h["Flatness"]return g end,},["Recoil"]={order=4,name="Отдача",negation=true,max=3,iconX=711,iconY=585,GetStat=function(d,e,f)local g=d.Recoil local h=d.RecoilUp*(d.RecoilUpMultFirstShot or 1)local i=d.RecoilSide local j=d.RecoilRandomUp local k=d.RecoilRandomSide local l=d.RecoilMult or 1 local m={["Recoil"]=0,}c(f,m,d)b(d.Attachments,d.Attachments,m,d)CalculateAttachments(e,e,m,d)l=l+m["Recoil"]local n=((g)+(h/1.5)+(i/0.5)+(j/0.3)+(k/0.2))/5 n=n*l n=math.Round(n,2)return n end,},["RPM"]={order=5,name="Скорострельность",negation=false,max=1000,iconX=673,iconY=585,GetStat=function(d,e,f)local g=d.RPM local h={["RPM"]=0,}c(f,h,d)b(d.Attachments,d.Attachments,h,d)CalculateAttachments(e,e,h,d)g=g+h["RPM"]return math.Round(g)end,},["MalfunctionMeanShotsToFail"]={order=6,name="Надежность",negation=false,max=100,iconX=673,iconY=623,GetStat=function(d,e,f)local g=d.MalfunctionMeanShotsToFail local h={["MalfunctionMeanShotsToFail"]=0,}c(f,h,d)b(d.Attachments,d.Attachments,h,d)CalculateAttachments(e,e,h,d)g=g+h["MalfunctionMeanShotsToFail"]return math.Round(g/650*100,2)end,},["Ergonomics"]={order=7,name="Удобность",negation=false,max=100,iconX=673,iconY=642,GetStat=function(d,e,f)local g=d.ergonomics or 1 local h={["Ergonomics"]=0,}c(f,h,d)b(d.Attachments,d.Attachments,h,d)CalculateAttachments(e,e,h,d)g=g+h["Ergonomics"]return math.Round(g/1.5*100,0)end,},["AimDownSightsTime"]={order=8,name="Скорость прицеливания",negation=true,max=2,iconX=711,iconY=699,itemHide=true,GetStat=function(d,e,f)local g=d.MalfunctionMeanShotsToFail local h={["AimDownSightsTime"]=0,}c(f,h,d)b(d.Attachments,d.Attachments,h,d)CalculateAttachments(e,e,h,d)g=g+h["AimDownSightsTime"]return math.Round(g,2)end,},}function a:GetRenderModelFromArmor(d,e)local f=string.Explode("/",e)local g=string.Replace(d,"loners",f[3])if util.GetModelInfo(g).KeyValues==nil then g=d end return g end ix.util.Include("cl_tooltips.lua")ix.util.Include("cl_interaction-menu.lua")ix.util.Include("sh_tiers.lua")ix.util.Include("sh_misc_items.lua")ix.util.Include("arc9_binds/cl_arc9_binds.lua")ix.util.Include("arc9_binds/sv_arc9_binds.lua")ix.util.Include("arc9_binds/sh_arc9_binds.lua")function ix.itemsList:Initialization()local d=file.Find(a.folder.."/"..BranchMZ.."/items-list/*.lua","LUA")local e=file.Find(a.folder.."/"..BranchMZ.."/registration/*.lua","LUA")for f,file in ipairs(d)do ix.util.Include(a.folder.."/"..BranchMZ.."/items-list/"..file)end for f,file in ipairs(e)do ix.util.Include(a.folder.."/"..BranchMZ.."/registration/"..file)end end function ix.itemsList:TooltipReload()if CLIENT then local d=0.35 local e=0 local f local g local h={}timer.Create("ixCheckTargetEntity",0.1,0,function()local i=LocalPlayer()local j=SysTime()if(!IsValid(i))then return end local k=i:GetCharacter()if(!k)then return end h.start=i:GetShootPos()h.endpos=h.start+i:GetAimVector(i)*160 h.filter=i h.mask=MASK_SHOT_HULL g=util.TraceHull(h).Entity if(g!=f)then e=j+d f=g end local l=ix.gui.entityInfo local m=j>=e and(!IsValid(ix.gui.menu)or ix.gui.menu.bClosing)and(!IsValid(ix.gui.characterMenu)or ix.gui.characterMenu.bClosing)local n=g.OnShouldPopulateEntityInfo and g:OnShouldPopulateEntityInfo()or true if(m and IsValid(g)and hook.Run("ShouldPopulateEntityInfo",g)!=false and(g.PopulateEntityInfo or n))then if(!IsValid(l)or(IsValid(l)and l:GetEntity()!=g))then if(IsValid(ix.gui.entityInfo))then ix.gui.entityInfo:Remove()end local o=vgui.Create(ix.option.Get("minimalTooltips",false)and"ixTooltipMinimal"or"ixTooltip")local p=g:GetNetVar("player")if(p)then o:SetEntity(p)o.entity=g else o:SetEntity(g)end o:SetDrawArrow(true)ix.gui.entityInfo=o end elseif(IsValid(l))then l:Remove()end end)end end do local d=scripted_ents.Get("ix_item")if CLIENT then function d:Draw()local e=hook.Run("ixPostDrawItemEntity",self)if e~=true then self:DrawModel()end end end scripted_ents.Register(d,"ix_item")end ix.itemsList:Initialization()