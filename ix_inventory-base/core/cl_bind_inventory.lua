-- <|> Hello, fucker | Taxin2012 and PURP was here | Mysterious Zone Project | mzrp.ru <|>
local ix=ix local IsValid=IsValid local a=vgui.Create local b=concommand.Add local tostring=tostring local c=string.Right local d=net.Start local e=net.WriteString local f=net.WriteUInt local g=net.WriteTable local h=net.SendToServer local i=ix.plugin.list["inventory-base"]local function j()do _nextOpenInventoryDelay=1.5 _nextOpenInventoryFrame=0 local k="mz-inventory-backpack"local l,m,n="inventory",KEY_I,"Открыть инвентарь"local o=ix.controlManager.RegisterBind(l,m,n)local function p(q)if(_nextOpenInventoryFrame or 0)<CurTime()then _nextOpenInventoryFrame=CurTime()+q if IsValid(ix.gui.stalkerInventory)then return end local r=LocalPlayer()local s=a("inventory_stalker.mainframe")s.OnKeyCodeReleased=function(t,u)local v=ix.controlManager.GetKey(l)if u==v then t:Close()end end end end if o then local function q(r)if(r._nextTriggerInv or 0)>CurTime()then return end local s=r:GetCharacter()if not s then return end if r:GetLocalVar("ragdoll",nil)~=nil then return r:Notify("Сейчас это недоступно!")end if r:IsRestricted()==true then return r:Notify("Вы связаны!")end local t=ix.option.Get("inventoryBackpackAnim",false)local u=(t and _nextOpenInventoryDelay or.25)r._nextTriggerInv=CurTime()+u local v=r:GetWeapon(k)if not IsValid(v)then d("stalkerInventory.InvGiveWeapon")h()timer.Simple(u,function()p(u)end)return end local w=r:GetActiveWeapon()if IsValid(w)then if(w:GetClass()~=k)then r._lastWeaponInv=w input.SelectWeapon(v)timer.Simple(u,function()p(u)end)elseif(w:GetClass()==k or w.isQuickItem==true)then p(u)end end end b(o,function(r)q(r)end)end end do for k=1,4 do local l,m,n="stalker_quickslot_0"..k,91+k,"Ячейка быстрого доступа "..k local o=ix.controlManager.RegisterBind(l,m,n)local function p(q,r)r=tostring(r)local s=q:GetCharacter()if not IsValid(q)or not q:Alive()or not s then return end local t=s:GetEquipmentQuick()for u,v in next,t do local w=v:GetData("equipmentSlot")print("equipmentSlot",w,r,c(w,1))if w then w=c(w,1)if w==r then d("ixInventoryAction")e("use")f(v.id,32)f(v.invID,32)g(v.data or{})h()break end end end end b(o,function(q)p(q,k)end)end end do local k,l,m="weapon_discharge",KEY_X,"Разрядить экипированное оружие"local n=ix.controlManager.RegisterBind(k,l,m)local function o(p)if(p._nextDischarge or 0)>CurTime()then return end local q=p:GetCharacter()if not IsValid(p)or not p:Alive()or not q then return end local r=p:GetActiveWeapon()if IsValid(r)then local s=r:GetClass()local t=r:GetNetVar("ixItem")local u=ix.item.instances[t]if u and u.uniqueID==s then d("ixInventoryAction")e("unloadmag")f(t,32)f(u.invID,32)g(u.data or{})h()p._nextDischarge=CurTime()+1 end end end b(n,function(p)o(p)end)end end hook.Add("InitializeControlManager",i.uniqueID.."InitializeControlManager",j)if IX_RELOADED==false then j()end