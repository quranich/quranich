-- <|> Hello, fucker | Taxin2012 and PURP was here | Mysterious Zone Project | mzrp.ru <|>
local a=ix.plugin.list["fixes"]a.name="Фиксы"a.author="Taxin2012"a.description="Ломаем планы тех, кто ломает сервер"ix.lang.AddTable("english",{optWinter_Snowfall="Snowfall"})ix.lang.AddTable("russian",{optWinter_Snowfall="Снегопад"})if SERVER then ix.util.Include("sv_plugin.lua")end if CLIENT then if Winter~=nil then ix.option.Add("Winter_Snowfall",ix.type.bool,true,{category="performance",OnChanged=function(d,e)Winter.NoSnowFlakes=not e end})function a:CharacterLoaded()Winter.NoSnowFlakes=not ix.option.Get("Winter_Snowfall",true)end end netstream.Hook("CharsEditMenu",function(d)if IsValid(a.Vgui)then a.Vgui:Remove()end local e=vgui.Create("CharsEditMenu")e:SetPlayers(d)a.Vgui=e end)local function b(d,e)if d then local f=d:GetItems()for g,h in next,f do local i=h.data and h.data.equipmentSlot or nil if i and string.match(i,e)then return h end end end end net.Receive("charsmenu.RedrawInventorySlots",function()local d=net.ReadTable()local e=d[1]local f=ix.item.inventories[e]local g,h=LocalPlayer():GetCharacter():GetEquipmentInventory()local i=ix.gui["inv"..h]local j=ix.gui.stalkerInventory.OnClose ix.gui.stalkerInventory.OnClose=function(k)j(k)local l for m,n in pairs(ix.item.inventories)do if m==e then l=true break end end if!l then ix.item.inventories[e]=nil end net.Start("charsmenu.RedrawInventorySlots")net.SendToServer()end ix.stalkerInventory:CharacterInventoryEquipDest(ix.gui.stalkerInventoryEquip,f)end)a.cosmeticDescriptions={["76561198106011866"]='На спине висит записка с текcтом: "Я неудачник - тронешь меня и моя неудача перейдет к тебе".',["76561198862156511"]='На поясе подсумок с набором инструментов к подсумку пришит патрон "50 Beowulf".',["76561198041237807"]="На поясе есть сумка, из неё торчат разные травы и мензурки, к которым прикреплены небольшие бумажки с заметками.",["76561198968828657"]='На поясе позолоченная армейская фляга с гравировкой "Тихий".',["76561198222015556"]="Из левого нарукавного кармана виднеется сложенная опасная бритва.",["76561199063233972"]="На поясе закреплена книга с давно выцветшей обложкой и еле видными буквами.",["76561198963868699"]="На запястье левой руки татуировка весов.",["76561198024116696"]='На шее висит кулон в виде артефакта "Раскол".',["76561199157929040"]="С пояса, на цепи свисает старинная книга в черном кожанном переплёте.",["76561198252997947"]='На шее золотая цепь с патроном "50 BMG".',["76561198795604094"]='На поясе висит подсумок с потертой и очень старой нашивкой - "НМК".',["76561198175640941"]='Жетон на шее с надписью - "Shin no Aragi".',["76561199183586110"]="На шее висит светящийся осколок красного артефакта.",["76561198252997947"]="Штаны затянуты старым красно-армейским ремнём. На ремне маленькая сумка из которой видно линзу камеры.",["76561198077297426"]='Из нагрудного кармана торчит пачка папирос "Беломорканал".',["76561198999383018"]='На шее неряшливый самодельный медальон с острыми концами и вырезанной надписью "Poena".',["76561199183586110"]='На груди висит золотой кулон "Phoenix".',["76561198398954611"]='На безымянном пальце левой руки перстень с надписью "Ad infinitum".',["76561199007948556"]="На поясе виднеется окровавленный клинок, рядом с ним потрепанная старая книга, на которой заметен символ атома.",["76561198312742839"]="На плече татуировка силуэта спартанского шлема, обрамленная лавровым венком.",["76561199122467127"]="На правом запястье тонкий кожаный браслет с металлической пластиной, на которой изображена ветвь сирени.",["76561198132112464"]="На поясе висит ржавый лом.",["76561198382428269"]="На поясе висит нож в футляре, на который нанесена гравировка †S.T.A.L.K.E.R†",["76561198452752099"]="На поясе висят карманные часы на цепочке с гравировкой `Дядя Игорь`.",["76561198964601467"]="На поясе висит кровавый топор",["76561199011368505"]="На поясе висит фляга с надписью `Напиток богов`",["76561198928983751"]="На плече виднеется изрядно потёртый патч с надписью `Девять глаз`, прошитый золотыми нитками.",["76561198427773534"]="На груди прикреплен значок ☤",["76561198183661515"]="На правом плече - шеврон `Гончие` с изображением лисы и ножа в пасти, имеющий легкую потертость и несколько подпаленных участков | На левом плече - Герб Севастополя",["76561198088346287"]="На прикладе автомата висит брелок в виде маленькой железной красной косы , лезвие сделанно из серебра",["76561198877157536"]="На коленях наколоты воровские звезды.",["76561198976296803"]="На поясе закреплён дневник бело-красного цвета с надписью `Познание зоны  - настоящее чудо`",["76561199223563244"]="На правом предплечье чёрная метка `S.T.A.L.K.E.R`",["76561198388931926"]='На шее висит медальон из совмещенных букв "P&W".',["76561198189185429"]='Из правого кармана на груди торчит алая роза. Из того же кармана аккуратно повис жетон: Ловелас',["76561198986231368"]='От мужчины пахло сиренью. На правом запястье татуировка руны `Кельтский узел`',["76561198156683177"]='На руку намотан кожаный шнурок с крестом из переплетенных ветвей, на котором вырезано "Memento Mori".',["76561198024512319"]="Татуировка в виде перстня на среднем пальце правой руки.",["76561198288657803"]='На правом указательном пальце перстень-печатка "Совесть".',["76561198260637634"]='На поясе висит футляр под бинокль с гравировкой "✩".',["76561198121065140"]='На правой кисти руки татуировка в виде зайца в противогазе".',["76561198227718200"]="На поясе висит небольшой черный кейс с позолоченными узорами.",["76561199405404475"]="На руке ножом выцарапанно Маргарита",["76561199104231228"]="На правой руке патч с Флагом Сербии. На шее висит православный крест и военный жетон",["76561198874670067"]="На поясе закреплён разбитый ПДА, на крышке корпуса гравировка `Ржавый`.",["76561199017553002"]="Из нагрудного кармана виден стебель растения с листьями, предположительно это мята. Уставший взгляд и бледное лицо.",["76561199519168838"]="На всю спину виднеется окровавленный и запёкшийся вырез: `ТИМОФЕЙ`",["76561198308840828"]='Левая ладонь перевязана.',["76561197970684478"]='На правой ягодице красный отпечаток ладошки.',["76561199098939140"]='На шее висит подвеска с надписью "Пряники"',["76561198839970449"]='На поясе посетите старый гримуар  покрытий руническими символами. Вся книга покрыта украшениями.',["76561198874616051"]='На спине висит шеврон с текcтом: "ЦЕЗАРЬ".',}local function c(self,d,e)return kouka.HasFlag("NoClip")and IsValid(d)and d:IsPlayer()end properties.Add("copy_sid64",{MenuLabel="Copy SteamID64",Order=400,MenuIcon="icon16/textfield_add.png",Filter=c,Action=function(self,d)SetClipboardText(d:SteamID64())end})properties.Add("copy_sid32",{MenuLabel="Copy SteamID32",Order=400,MenuIcon="icon16/textfield_add.png",Filter=c,Action=function(self,d)SetClipboardText(d:SteamID32())end})properties.Add("copy_uid",{MenuLabel="Copy UID",Order=400,MenuIcon="icon16/textfield_add.png",Filter=c,Action=function(self,d)SetClipboardText(d:GetCharacter():GetID())end})end hook.Add("InitializedConfig",a.uniqueID.."InitializedConfig",function()local b=-ix.config.Get("walkSpeed")*1.2 hook.Add("SetupMove","FixesHook9",function(c,d,e)if c:GetMoveType()~=MOVETYPE_WALK then return end if d:GetForwardSpeed()<0 then d:SetForwardSpeed(b)end end)end)ix.command.Add("CharsEditMenu",{adminOnly=true,OnRun=function(self,b)netstream.Start(b,"CharsEditMenu")end})ix.command.Add("TeleportToStorage",{adminOnly=true,arguments=ix.type.number,OnRun=function(self,b,c)a:TeleportToStorage(b,c)end})a.noCollisionList={["ix_item"]=true,["ix_money"]=true,["ix_shipment"]=true,}hook.Add("OnEntityCreated","FixesHook1",function(b)local c=b:GetClass()if a.noCollisionList[c]then b:SetCollisionGroup(COLLISION_GROUP_WEAPON)b:SetCustomCollisionCheck(true)end end)hook.Add("ShouldCollide","FixesHook2",function(b,c)if IsValid(b)and IsValid(c)then local d=b:GetClass()local e=c:GetClass()if(b.ixPlayer~=nil or d=="dungeon-door")and(c.ixPlayer~=nil or e=="dungeon-door")then return true end if b.ixPlayer~=nil or c.ixPlayer~=nil then return true end if a.noCollisionList[d]~=nil and a.noCollisionList[e]~=nil then return false end end end)do ix.char.RegisterVar("removedTime",{field="removed_time",fieldType=ix.type.number,bNoDisplay=true,bNoNetworking=true,bNotModifiable=true,bSaveLoadInitialOnly=true})local b=ix.item.Register("taxins_firework",nil,nil,nil,true)b.name="Феерверк"b.model="models/Items/BoxSRounds.mdl"b.description="Парочки таких фейерверков хватает чтобы ощутить настоящий праздник даже в суровых условиях ЧЗО. Производится подпольной компанией Taxin2012"b.itemIcon={material=ix.util.GetMaterial("purp/stalker/ui/ui_icon_equipment-misc_01.png","smooth"),x=2250,y=2200,width=50,height=150,}b.functions.use={name="Запустить",tip="useTip",icon="icon16/lightning.png",OnRun=function(c)if Winter==nil or(Winter.nextFirework~=nil and Winter.nextFirework>CurTime())then return false end local d=c.player local e={}e.start=d:GetShootPos()e.endpos=e.start+d:GetAimVector()*96 e.filter=d local f=util.TraceLine(e)if f.Hit==false then return false end local g=ents.Create("taxin_fireworks")g:SetPos(f.HitPos)g:SetOwner(d)g:Spawn()return true end,OnCanRun=function(c)local d=c.player return IsValid(c.entity)==false and IsValid(d)and c.invID==d:GetCharacter():GetInventory():GetID()end}end